{"version":3,"file":"js/551.cf8537bc.js","mappings":"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","sources":["webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/EyeOutlined.js","webpack://guigu-oa-admin/./src/views/process/list/columns.js","webpack://guigu-oa-admin/./src/views/process/list/schemas.js","webpack://guigu-oa-admin/./src/api/process/process.js","webpack://guigu-oa-admin/./src/views/process/list/process.vue","webpack://guigu-oa-admin/./src/views/process/list/process.vue?b9c5"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3c7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176s176-78.8 176-176s-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112s112 50.1 112 112s-50.1 112-112 112z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'EyeOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","export const createColumns = ({ currentIndex }) => {\n  return [\n    {\n      type: 'selection',\n      key: 'selection',\n    },\n    {\n      title: '序号',\n      key: 'index',\n      width: 60,\n      render: (...[, record]) => {\n        return currentIndex() + record + 1;\n      },\n    },\n    {\n      title: '审批编号',\n      key: 'processCode',\n    },\n    {\n      title: '标题',\n      key: 'title',\n    },\n    {\n      title: '用户',\n      key: 'name',\n    },\n    {\n      title: '审批类型',\n      key: 'processTypeName',\n    },\n    {\n      title: '审批模版',\n      key: 'processTemplateName',\n    },\n    {\n      title: '描述',\n      key: 'description',\n    },\n    {\n      title: '状态',\n      key: 'status',\n      align: 'center',\n      width: 60,\n    },\n    {\n      title: '创建时间',\n      key: 'createTime',\n    },\n  ];\n};\n","export const schemas = [\n  {\n    field: 'keyword',\n    component: 'NInput',\n    label: '关键词',\n    defaultValue: '',\n    labelMessge: '关键词',\n    componentProps: {\n      placeholder: '审批编号/标题/手机号/姓名',\n    },\n  },\n  {\n    field: 'status',\n    component: 'NSelect',\n    label: '状态',\n    defaultValue: null,\n    labelMessge: '选择状态',\n    componentProps: {\n      placeholder: '请选状态',\n      options: [\n        { label: '默认', value: 0 },\n        { label: '审批中', value: 1 },\n        { label: '审批通过', value: 2 },\n        { label: '驳回', value: -1 },\n      ],\n    },\n  },\n  {\n    field: 'range',\n    component: 'NDatePicker',\n    label: '操作时间',\n    labelMessge: '操作时间',\n    componentProps: {\n      type: 'datetimerange',\n      clearable: true,\n      shortcuts: {\n        近2小时: () => {\n          const cur = new Date().getTime();\n          return [cur - 2 * 60 * 60 * 1000, cur];\n        },\n      },\n    },\n  },\n];\n","import { http } from '@/utils/http/axios';\n\nconst prefix = '/admin/process/';\n\n/**\n * @description: 获取审批模板列表-条件分页\n */\nexport function pageQueryProcess({ page, pageSize }, params) {\n  return http.request({\n    url: `${prefix}/${page}/${pageSize}`,\n    method: 'GET',\n    params,\n  });\n}\n","<template>\n  <n-card :bordered=\"false\" class=\"proCard\">\n    <BasicForm\n      @register=\"register\"\n      @submit=\"handleSubmit\"\n      @reset=\"handleReset\"\n    />\n    <BasicTable\n      :columns=\"columns\"\n      :request=\"loadDataTable\"\n      :row-key=\"(row) => row.id\"\n      ref=\"actionRef\"\n      :actionColumn=\"actionColumn\"\n      :scroll-x=\"1000\"\n      :pagination=\"pagination\"\n      @fetch-success=\"fetchSuccess\"\n    />\n  </n-card>\n</template>\n\n<script>\nexport default {\n  name: 'ProcessList',\n};\n</script>\n\n<script setup>\nimport { useForm, BasicForm } from '@/components/Form';\nimport { createColumns } from './columns';\nimport { schemas } from './schemas';\nimport { h, ref, unref, reactive } from 'vue';\nimport { BasicTable, TableAction } from '@/components/Table';\nimport { EyeOutlined } from '@vicons/antd';\nimport { pageQueryProcess } from '@/api/process/process';\n\nconst [register] = useForm({\n  gridProps: { cols: '1 m:2 l:3' },\n  labelWidth: 80,\n  schemas,\n});\n// 搜索表单参数\nconst defalutParams = () => {\n  return {\n    keyword: null,\n    status: null,\n    createTimeBegin: null,\n    createTimeEnd: null,\n  };\n};\nconst params = reactive(defalutParams());\n\nconst currentIndex = ref(1);\nconst actionRef = ref(null);\nconst columns = createColumns({\n  currentIndex() {\n    return unref(currentIndex);\n  },\n});\n// 操作列属性\nconst actionColumn = reactive({\n  width: 150,\n  title: '操作',\n  key: 'action',\n  fixed: 'right',\n  align: 'center',\n  render(record) {\n    return h(TableAction, {\n      style: 'text',\n      showLabel: false,\n      actions: createActions(record),\n    });\n  },\n});\nconst pagination = reactive({\n  prefix: (info) => {\n    return `共 ${info.itemCount} 条`;\n  },\n});\n\nfunction handleSubmit(fromModel) {\n  const { keyword, status, range } = fromModel;\n  Object.assign(params, {\n    keyword,\n    status,\n    createTimeBegin: range?.[0],\n    createTimeEnd: range?.[1],\n  });\n  reloadTable();\n}\n\nfunction handleReset() {\n  Object.assign(params, defalutParams());\n  reloadTable();\n}\n\nfunction createActions(record) {\n  return [\n    {\n      label: '查看',\n      type: 'primary',\n      icon: EyeOutlined,\n      onClick: handleView.bind(null, record),\n      auth: ['process_list'],\n    },\n  ];\n}\n\nfunction reloadTable() {\n  actionRef.value.reload();\n}\n\nasync function loadDataTable(res) {\n  return await pageQueryProcess({ ...res }, params);\n}\n\nfunction fetchSuccess() {\n  currentIndex.value =\n    (actionRef.value.pagination.page - 1) * actionRef.value.pagination.pageSize;\n}\n\nfunction handleView() {}\n</script>\n<style></style>\n","import script from \"./process.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./process.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","xmlns","viewBox","_hoisted_2","_createElementVNode","d","fill","_hoisted_3","defineComponent","name","render","_ctx","_cache","_openBlock","_createElementBlock","createColumns","currentIndex","type","key","title","width","record","align","schemas","field","component","label","defaultValue","labelMessge","componentProps","placeholder","options","value","clearable","shortcuts","近2小时","cur","Date","getTime","prefix","pageQueryProcess","page","pageSize","params","http","url","method","__default__","register","useForm","gridProps","cols","labelWidth","defalutParams","keyword","status","createTimeBegin","createTimeEnd","reactive","ref","actionRef","columns","unref","actionColumn","fixed","h","TableAction","style","showLabel","actions","createActions","pagination","info","itemCount","handleSubmit","fromModel","range","Object","assign","reloadTable","handleReset","icon","EyeOutlined","onClick","handleView","bind","auth","reload","async","loadDataTable","res","fetchSuccess","__exports__"],"sourceRoot":""}