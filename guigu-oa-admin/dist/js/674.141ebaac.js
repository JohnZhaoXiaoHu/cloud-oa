"use strict";(self["webpackChunkguigu_oa_admin"]=self["webpackChunkguigu_oa_admin"]||[]).push([[674],{92799:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("path",{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512L347.9 657.9A7.95 7.95 0 0 0 354 671z",fill:"currentColor"},null,-1),a=(0,t._)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:"currentColor"},null,-1),i=[o,a];n["Z"]=(0,t.aZ)({name:"CloseSquareOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,i)}})},90280:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5c.3-.5.7-.9 1-1.4c.1-.1.2-.3.3-.4c.5-.6.9-1.1 1.4-1.6l.3-.3l1.2-1.2l.4-.4c.5-.5 1-.9 1.6-1.4c.6-.5 1.1-.9 1.7-1.3c.2-.1.3-.2.5-.3c.5-.3.9-.7 1.4-1c.1-.1.3-.2.4-.3c.6-.4 1.2-.7 1.9-1.1c.1-.1.3-.1.4-.2c.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8c.7-.3 1.4-.5 2.1-.7c.2-.1.4-.1.6-.2c.6-.2 1.1-.3 1.7-.4c.2 0 .3-.1.5-.1c.7-.2 1.5-.3 2.2-.4c.2 0 .3 0 .5-.1c.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2c.2 0 .3 0 .5.1c.7.1 1.5.2 2.2.4c.2 0 .3.1.5.1c.6.1 1.2.3 1.7.4c.2.1.4.1.6.2c.7.2 1.4.4 2.1.7c.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8c.1.1.3.1.4.2c.6.3 1.3.7 1.9 1.1c.1.1.3.2.4.3c.5.3 1 .6 1.4 1c.2.1.3.2.5.3c.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4l1.2 1.2l.3.3c.5.5 1 1.1 1.4 1.6c.1.1.2.3.3.4c.4.4.7.9 1 1.4c.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 0 1 5.1 18.5c0 6-1.5 11.7-4.1 16.7c-.3.6-.7 1.2-1 1.8c0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5c-.3.5-.7.9-1 1.4c-.1.1-.2.3-.3.4c-.5.6-.9 1.1-1.4 1.6l-.3.3l-1.2 1.2l-.4.4c-.5.5-1 .9-1.6 1.4c-.6.5-1.1.9-1.7 1.3c-.2.1-.3.2-.5.3c-.5.3-.9.7-1.4 1c-.1.1-.3.2-.4.3c-.6.4-1.2.7-1.9 1.1c-.1.1-.3.1-.4.2c-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8c-.7.3-1.4.5-2.1.7c-.2.1-.4.1-.6.2c-.6.2-1.1.3-1.7.4c-.2 0-.3.1-.5.1c-.7.2-1.5.3-2.2.4c-.2 0-.3 0-.5.1c-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2c-.2 0-.3 0-.5-.1c-.7-.1-1.5-.2-2.2-.4c-.2 0-.3-.1-.5-.1c-.6-.1-1.2-.3-1.7-.4c-.2-.1-.4-.1-.6-.2c-.7-.2-1.4-.4-2.1-.7c-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8c-.1-.1-.3-.1-.4-.2c-.6-.3-1.3-.7-1.9-1.1c-.1-.1-.3-.2-.4-.3c-.5-.3-1-.6-1.4-1c-.2-.1-.3-.2-.5-.3c-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4l-1.2-1.2l-.3-.3c-.5-.5-1-1.1-1.4-1.6c-.1-.1-.2-.3-.3-.4c-.4-.4-.7-.9-1-1.4c-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8c-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5c.3-.5.7-.9 1-1.4c.1-.1.2-.3.3-.4c.5-.6.9-1.1 1.4-1.6l.3-.3l1.2-1.2l.4-.4c.5-.5 1-.9 1.6-1.4c.6-.5 1.1-.9 1.7-1.3c.2-.1.3-.2.5-.3c.5-.3.9-.7 1.4-1c.1-.1.3-.2.4-.3c.6-.4 1.2-.7 1.9-1.1c.1-.1.3-.1.4-.2c.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8c.7-.3 1.4-.5 2.1-.7c.2-.1.4-.1.6-.2c.6-.2 1.1-.3 1.7-.4c.2 0 .3-.1.5-.1c.7-.2 1.5-.3 2.2-.4c.2 0 .3 0 .5-.1c.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2c.2 0 .3 0 .5.1c.7.1 1.5.2 2.2.4c.2 0 .3.1.5.1c.6.1 1.2.3 1.7.4c.2.1.4.1.6.2c.7.2 1.4.4 2.1.7c.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8c.1.1.3.1.4.2c.6.3 1.3.7 1.9 1.1c.1.1.3.2.4.3c.5.3 1 .6 1.4 1c.2.1.3.2.5.3c.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4l1.2 1.2l.3.3c.5.5 1 1.1 1.4 1.6c.1.1.2.3.3.4c.4.4.7.9 1 1.4c.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 0 1 5.1 18.5c0 6-1.5 11.7-4.1 16.7c-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5c-.3.5-.7.9-1 1.4c-.1.1-.2.3-.3.4c-.5.6-.9 1.1-1.4 1.6l-.3.3l-1.2 1.2l-.4.4c-.5.5-1 .9-1.6 1.4c-.6.5-1.1.9-1.7 1.3c-.2.1-.3.2-.5.3c-.5.3-.9.7-1.4 1c-.1.1-.3.2-.4.3c-.6.4-1.2.7-1.9 1.1c-.1.1-.3.1-.4.2c-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8c-.7.3-1.4.5-2.1.7c-.2.1-.4.1-.6.2c-.6.2-1.1.3-1.7.4c-.2 0-.3.1-.5.1c-.7.2-1.5.3-2.2.4c-.2 0-.3 0-.5.1c-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2c-.2 0-.3 0-.5-.1c-.7-.1-1.5-.2-2.2-.4c-.2 0-.3-.1-.5-.1c-.6-.1-1.2-.3-1.7-.4c-.2-.1-.4-.1-.6-.2c-.7-.2-1.4-.4-2.1-.7c-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8c-.1-.1-.3-.1-.4-.2c-.6-.3-1.3-.7-1.9-1.1c-.1-.1-.3-.2-.4-.3c-.5-.3-1-.6-1.4-1c-.2-.1-.3-.2-.5-.3c-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4l-1.2-1.2l-.3-.3c-.5-.5-1-1.1-1.4-1.6c-.1-.1-.2-.3-.3-.4c-.4-.4-.7-.9-1-1.4c-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8c-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z",fill:"currentColor"},null,-1),a=[o];n["Z"]=(0,t.aZ)({name:"ControlOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,a)}})},88350:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"currentColor"},null,-1),a=[o];n["Z"]=(0,t.aZ)({name:"DeleteOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,a)}})},18761:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1),a=[o];n["Z"]=(0,t.aZ)({name:"EditOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,a)}})},60841:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("defs",null,null,-1),a=(0,t._)("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),i=(0,t._)("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),s=[o,a,i];n["Z"]=(0,t.aZ)({name:"PlusOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,s)}})},37683:function(e,n,c){var t=c(73396);const l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},o=(0,t._)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),a=[o];n["Z"]=(0,t.aZ)({name:"SaveOutlined",render:function(e,n){return(0,t.wg)(),(0,t.iD)("svg",l,a)}})},88628:function(e,n,c){c.d(n,{Af:function(){return o},JD:function(){return i},X6:function(){return s},_8:function(){return a},iO:function(){return r}});var t=c(6618);const l="/admin/system/sysMenu";function o(){return t.d.request({url:`${l}/findNodes`,method:"get"})}function a(e){return t.d.request({url:`${l}`,method:"put",data:e},{successMessageText:"修改成功"})}function i(e){return t.d.request({url:`${l}/${e}`,method:"DELETE"},{successMessageText:"删除成功"})}function s(e){return t.d.request({url:`${l}/menuIdType/${e}`,method:"get"})}function r(e){return t.d.request({url:`${l}/doAssign`,method:"post",data:e})}},26187:function(e,n,c){c.d(n,{F3:function(){return u},JD:function(){return a},RB:function(){return o},_d:function(){return i},fn:function(){return r},lR:function(){return d},ul:function(){return s}});var t=c(6618);const l="/admin/system/sysRole";function o({page:e,pageSize:n},c){return t.d.request({url:`${l}/${e}/${n}`,method:"get",params:c})}function a(e){return t.d.request({url:`${l}/${e}`,method:"delete"},{successMessageText:"删除成功"})}function i(e){return t.d.request({url:`${l}`,method:"POST",data:e},{successMessageText:"添加成功"})}function s(e){return t.d.request({url:`${l}`,method:"PUT",data:e},{successMessageText:"更改成功"})}function r(e){return t.d.request({url:`${l}/batch`,method:"DELETE",data:e},{successMessageText:"批量删除成功"})}function u(e){return t.d.request({url:`${l}/toAssign/${e}`,method:"get"})}function d(e){return t.d.request({url:`${l}/doAssign`,method:"post",data:e},{successMessageText:"分配成功"})}},16888:function(e,n,c){c.r(n),c.d(n,{default:function(){return R}});var t=c(73396),l=c(87139);const o={class:"py-3 menu-list"};function a(e,n,c,a,i,s){const r=(0,t.up)("BasicForm"),u=(0,t.up)("PlusOutlined"),d=(0,t.up)("n-icon"),m=(0,t.up)("n-button"),h=(0,t.up)("DeleteOutlined"),w=(0,t.up)("n-space"),f=(0,t.up)("BasicTable"),p=(0,t.up)("n-input"),v=(0,t.up)("n-form-item"),g=(0,t.up)("n-form"),k=(0,t.up)("n-modal"),y=(0,t.up)("n-tree"),x=(0,t.up)("n-card");return(0,t.wg)(),(0,t.j4)(x,{bordered:!1,class:"proCard table"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{onRegister:e.register,onSubmit:e.handleSubmit,onReset:e.handleReset},null,8,["onRegister","onSubmit","onReset"]),(0,t.Wm)(f,{columns:e.columns,request:e.loadDataTable,"row-key":e=>e.id,ref:"actionRef",actionColumn:e.actionColumn,"scroll-x":1e3,pagination:e.pagination,onEditRowEnd:e.rowEditEnd,"onUpdate:checkedRowKeys":e.onCheckedRow},{tableTitle:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[e.hasAddPermission?((0,t.wg)(),(0,t.j4)(m,{key:0,strong:"",secondary:"",type:"primary",onClick:n[0]||(n[0]=()=>e.showAddModal=!0)},{icon:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Uk)(" 添加 ")])),_:1})):(0,t.kq)("",!0),e.hasBatchRemovePermission?((0,t.wg)(),(0,t.j4)(m,{key:1,strong:"",secondary:"",type:"error",onClick:e.removeRows},{icon:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Uk)(" 批量删除 ")])),_:1},8,["onClick"])):(0,t.kq)("",!0)])),_:1})])),_:1},8,["columns","request","row-key","actionColumn","pagination","onEditRowEnd","onUpdate:checkedRowKeys"]),e.hasAddPermission?((0,t.wg)(),(0,t.j4)(k,{key:0,show:e.showAddModal,"onUpdate:show":n[4]||(n[4]=n=>e.showAddModal=n),"show-icon":!1,preset:"dialog",title:"新建"},{action:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{onClick:n[3]||(n[3]=()=>e.showAddModal=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(m,{type:"info",loading:e.formBtnLoading,onClick:e.confirmForm},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1},8,["loading","onClick"])])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(g,{model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":80,class:"py-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{label:"角色名称",path:"roleName"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{placeholder:"请输入角色名称",value:e.formParams.roleName,"onUpdate:value":n[1]||(n[1]=n=>e.formParams.roleName=n)},null,8,["value"])])),_:1}),(0,t.Wm)(v,{label:"角色编码",path:"roleCode"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{placeholder:"请输入角色编码",value:e.formParams.roleCode,"onUpdate:value":n[2]||(n[2]=n=>e.formParams.roleCode=n)},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show"])):(0,t.kq)("",!0),(0,t.Wm)(k,{show:e.showAssignModal,"onUpdate:show":n[6]||(n[6]=n=>e.showAssignModal=n),"show-icon":!1,preset:"dialog",title:e.editRoleTitle},{action:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{type:"info",ghost:"","icon-placement":"left",onClick:e.packHandle},{default:(0,t.w5)((()=>[(0,t.Uk)(" 全部"+(0,l.zw)(e.expandedKeys.length?"收起":"展开"),1)])),_:1},8,["onClick"]),(0,t.Wm)(m,{type:"info",ghost:"","icon-placement":"left",onClick:e.checkedAllHandle},{default:(0,t.w5)((()=>[(0,t.Uk)(" 全部"+(0,l.zw)(e.checkedAll?"取消":"选择"),1)])),_:1},8,["onClick"]),(0,t.Wm)(m,{type:"info",ghost:"",onClick:n[5]||(n[5]=()=>e.showAssignModal=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(m,{type:"primary",loading:e.formBtnLoading,onClick:e.confirmTreeMenu},{default:(0,t.w5)((()=>[(0,t.Uk)("提交")])),_:1},8,["loading","onClick"])])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(y,{"block-line":"",cascade:"",checkable:"","virtual-scroll":"",ref:"treeRef",data:e.treeData,expandedKeys:e.expandedKeys,"checked-keys":e.checkedKeys,style:{"max-height":"650px",overflow:"hidden"},"onUpdate:checkedKeys":e.checkedTree,"onUpdate:expandedKeys":e.onExpandedKeys},null,8,["data","expandedKeys","checked-keys","onUpdate:checkedKeys","onUpdate:expandedKeys"])])])),_:1},8,["show","title"])])),_:1})}var i=c(44870),s=c(59814),r=c(76684),u=c(26187);const d=[{type:"selection",key:"selection"},{title:"id",key:"id"},{title:"角色名称",key:"roleName",edit:!0,editRow:!0,editComponent:"NInput",editRule:!0},{title:"角色编码",key:"roleCode",editComponent:"NInput",edit:!0,editRow:!0},{title:"创建时间",key:"createTime"}];var m=c(60841),h=c(88350),w=c(18761),f=c(90280),p=c(37683),v=c(92799),g=c(91260),k=c(98978),y=c(42325),x=c(88628),C=c(5373);const _={roleName:{required:!0,trigger:["blur","input"],message:"请输入角色名称"},roleCode:{required:!0,trigger:["blur","input"],message:"请输入角色编码"}},b=[{field:"roleName",component:"NInput",label:"角色名称",defaultValue:"",labelMessge:"筛选角色名称",componentProps:{placeholder:"请输入角色名称"},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]}];var M=(0,t.aZ)({components:{BasicTable:s.M,BasicForm:r.O,PlusOutlined:m.Z,DeleteOutlined:h.Z},setup(){const e=(0,g.U)(),n=(0,k.R)(),{hasPermission:c}=(0,C.g)(),l=(0,i.iH)(null),o=(0,i.iH)(),a=(0,i.iH)(null),m=(0,i.iH)(""),M=()=>({roleName:"",roleCode:""}),q=(0,i.qj)(M()),H=(0,t.Fl)((()=>c(["system_role_add"]))),R=(0,t.Fl)((()=>c(["system_role_remove"]))),z=(0,i.iH)(!1),T=(0,i.iH)(!1),A=(0,i.qj)(M()),P=(0,i.iH)([]),W=(0,i.qj)({prefix:e=>`共 ${e.itemCount} 条`}),$=(0,i.qj)({width:150,title:"操作",key:"action",fixed:"right",align:"center",render(e){return(0,t.h)(s.p,{style:"text",showLabel:!1,actions:j(e)})}}),U=(0,i.iH)(!1),Z=(0,i.iH)(""),D=(0,i.iH)([]),E=(0,i.iH)([]),L=(0,i.iH)([]),B=(0,i.qj)({roleId:null,menuIdList:null}),N=(0,i.iH)(!1);function O(e){m.value=e.key,e.onEdit?.(!0)}function K(e){m.value="",e.onEdit?.(!1,!1)}async function V(e){const n=await(e.onEdit?.(!1,!0));if(n){m.value="";const{id:n,roleName:c,roleCode:t}=e;await(0,u.ul)({id:n,roleName:c,roleCode:t})}}async function S(e){Z.value=`分配 ${e.roleName} 的菜单权限`,B.roleId=e.id;const n=await(0,x.X6)(e.id);null!=n&&n.length>0&&(L.value=n.filter((e=>2==e.type)).map((e=>e.id)),E.value=n.map((e=>e.id))),U.value=!0}function j(e){return e.editable?[{label:"保存",type:"success",icon:p.Z,onClick:V.bind(null,e)},{label:"取消",type:"warning",icon:v.Z,onClick:K.bind(null,e)}]:[{label:"删除",type:"error",color:"red",icon:h.Z,onClick:G.bind(null,e),ifShow:()=>!0,auth:["system_role_remove"]},{label:"编辑",type:"primary",icon:w.Z,onClick:O.bind(null,e),ifShow:()=>!0,auth:["system_role_update"]},{label:"分配角色",type:"warning",icon:f.Z,onClick:S.bind(null,e),ifShow:()=>!0,auth:["system_menu_assign"]}]}const[I,{setProps:F}]=(0,r.c)({gridProps:{cols:3},showAdvancedButton:!1,schemas:b}),J=async e=>await(0,u.RB)({...e},q);function X(e){P.value=e}function G(e){n.info({title:"提示",content:`您想删除${e.roleName}`,positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await(0,u.JD)(e.id),Q()},onNegativeClick:()=>{}})}function Q(){o.value.reload()}function Y(e){Object.assign(q,e),Q()}function ee(){Object.assign(q,M()),Q()}function ne(n){n.preventDefault(),T.value=!0,l.value?.validate((async n=>{n?(console.log(n),e.error("请填写完整信息")):(await(0,u._d)(A),setTimeout((()=>{z.value=!1,Q()}))),T.value=!1}))}function ce(){Q()}async function te(){const c=(0,i.SU)(P);0!==c.length?n.warning({title:"提示",content:`您要删除${c}`,positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await(0,u.fn)(c),Q()},onNegativeClick:()=>{}}):e.warning("请至少勾选一列")}function le(e){L.value=[...e]}function oe(e){E.value=e}function ae(){E.value.length?E.value=[]:E.value=(0,y.o)(D.value)}function ie(){N.value?(L.value=[],N.value=!1):(L.value=(0,y.o)(D.value),N.value=!0)}function se(){T.value=!0;const n=a.value.getIndeterminateData().keys;B.menuIdList=[...L.value,...n],(0,x.iO)(B).then((()=>{e.success("分配成功"),U.value=!1})).finally((()=>{T.value=!1}))}return(0,t.bv)((async()=>{const e=await(0,x.Af)(),{treeMenuList:n}=(0,y.xL)(e);D.value=n})),{rules:_,columns:d,schemas:b,register:I,setProps:F,formRef:l,treeRef:a,rowEditEnd:ce,pagination:W,formParams:A,showAssignModal:U,editRoleTitle:Z,treeData:D,expandedKeys:E,checkedKeys:L,checkedAll:N,showAddModal:z,removeRows:te,confirmForm:ne,formBtnLoading:T,loadDataTable:J,onCheckedRow:X,actionColumn:$,actionRef:o,handleSubmit:Y,handleReset:ee,checkedTree:le,onExpandedKeys:oe,packHandle:ae,checkedAllHandle:ie,confirmTreeMenu:se,hasAddPermission:H,hasBatchRemovePermission:R}}}),q=c(40089);const H=(0,q.Z)(M,[["render",a]]);var R=H}}]);
//# sourceMappingURL=674.141ebaac.js.map