"use strict";(self["webpackChunkguigu_oa_admin"]=self["webpackChunkguigu_oa_admin"]||[]).push([[133],{90280:function(e,l,t){var n=t(73396);const c={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},a=(0,n._)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5c.3-.5.7-.9 1-1.4c.1-.1.2-.3.3-.4c.5-.6.9-1.1 1.4-1.6l.3-.3l1.2-1.2l.4-.4c.5-.5 1-.9 1.6-1.4c.6-.5 1.1-.9 1.7-1.3c.2-.1.3-.2.5-.3c.5-.3.9-.7 1.4-1c.1-.1.3-.2.4-.3c.6-.4 1.2-.7 1.9-1.1c.1-.1.3-.1.4-.2c.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8c.7-.3 1.4-.5 2.1-.7c.2-.1.4-.1.6-.2c.6-.2 1.1-.3 1.7-.4c.2 0 .3-.1.5-.1c.7-.2 1.5-.3 2.2-.4c.2 0 .3 0 .5-.1c.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2c.2 0 .3 0 .5.1c.7.1 1.5.2 2.2.4c.2 0 .3.1.5.1c.6.1 1.2.3 1.7.4c.2.1.4.1.6.2c.7.2 1.4.4 2.1.7c.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8c.1.1.3.1.4.2c.6.3 1.3.7 1.9 1.1c.1.1.3.2.4.3c.5.3 1 .6 1.4 1c.2.1.3.2.5.3c.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4l1.2 1.2l.3.3c.5.5 1 1.1 1.4 1.6c.1.1.2.3.3.4c.4.4.7.9 1 1.4c.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 0 1 5.1 18.5c0 6-1.5 11.7-4.1 16.7c-.3.6-.7 1.2-1 1.8c0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5c-.3.5-.7.9-1 1.4c-.1.1-.2.3-.3.4c-.5.6-.9 1.1-1.4 1.6l-.3.3l-1.2 1.2l-.4.4c-.5.5-1 .9-1.6 1.4c-.6.5-1.1.9-1.7 1.3c-.2.1-.3.2-.5.3c-.5.3-.9.7-1.4 1c-.1.1-.3.2-.4.3c-.6.4-1.2.7-1.9 1.1c-.1.1-.3.1-.4.2c-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8c-.7.3-1.4.5-2.1.7c-.2.1-.4.1-.6.2c-.6.2-1.1.3-1.7.4c-.2 0-.3.1-.5.1c-.7.2-1.5.3-2.2.4c-.2 0-.3 0-.5.1c-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2c-.2 0-.3 0-.5-.1c-.7-.1-1.5-.2-2.2-.4c-.2 0-.3-.1-.5-.1c-.6-.1-1.2-.3-1.7-.4c-.2-.1-.4-.1-.6-.2c-.7-.2-1.4-.4-2.1-.7c-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8c-.1-.1-.3-.1-.4-.2c-.6-.3-1.3-.7-1.9-1.1c-.1-.1-.3-.2-.4-.3c-.5-.3-1-.6-1.4-1c-.2-.1-.3-.2-.5-.3c-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4l-1.2-1.2l-.3-.3c-.5-.5-1-1.1-1.4-1.6c-.1-.1-.2-.3-.3-.4c-.4-.4-.7-.9-1-1.4c-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8c-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5c.3-.5.7-.9 1-1.4c.1-.1.2-.3.3-.4c.5-.6.9-1.1 1.4-1.6l.3-.3l1.2-1.2l.4-.4c.5-.5 1-.9 1.6-1.4c.6-.5 1.1-.9 1.7-1.3c.2-.1.3-.2.5-.3c.5-.3.9-.7 1.4-1c.1-.1.3-.2.4-.3c.6-.4 1.2-.7 1.9-1.1c.1-.1.3-.1.4-.2c.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8c.7-.3 1.4-.5 2.1-.7c.2-.1.4-.1.6-.2c.6-.2 1.1-.3 1.7-.4c.2 0 .3-.1.5-.1c.7-.2 1.5-.3 2.2-.4c.2 0 .3 0 .5-.1c.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2c.2 0 .3 0 .5.1c.7.1 1.5.2 2.2.4c.2 0 .3.1.5.1c.6.1 1.2.3 1.7.4c.2.1.4.1.6.2c.7.2 1.4.4 2.1.7c.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8c.1.1.3.1.4.2c.6.3 1.3.7 1.9 1.1c.1.1.3.2.4.3c.5.3 1 .6 1.4 1c.2.1.3.2.5.3c.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4l1.2 1.2l.3.3c.5.5 1 1.1 1.4 1.6c.1.1.2.3.3.4c.4.4.7.9 1 1.4c.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 0 1 5.1 18.5c0 6-1.5 11.7-4.1 16.7c-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5c-.3.5-.7.9-1 1.4c-.1.1-.2.3-.3.4c-.5.6-.9 1.1-1.4 1.6l-.3.3l-1.2 1.2l-.4.4c-.5.5-1 .9-1.6 1.4c-.6.5-1.1.9-1.7 1.3c-.2.1-.3.2-.5.3c-.5.3-.9.7-1.4 1c-.1.1-.3.2-.4.3c-.6.4-1.2.7-1.9 1.1c-.1.1-.3.1-.4.2c-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8c-.7.3-1.4.5-2.1.7c-.2.1-.4.1-.6.2c-.6.2-1.1.3-1.7.4c-.2 0-.3.1-.5.1c-.7.2-1.5.3-2.2.4c-.2 0-.3 0-.5.1c-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2c-.2 0-.3 0-.5-.1c-.7-.1-1.5-.2-2.2-.4c-.2 0-.3-.1-.5-.1c-.6-.1-1.2-.3-1.7-.4c-.2-.1-.4-.1-.6-.2c-.7-.2-1.4-.4-2.1-.7c-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8c-.1-.1-.3-.1-.4-.2c-.6-.3-1.3-.7-1.9-1.1c-.1-.1-.3-.2-.4-.3c-.5-.3-1-.6-1.4-1c-.2-.1-.3-.2-.5-.3c-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4l-1.2-1.2l-.3-.3c-.5-.5-1-1.1-1.4-1.6c-.1-.1-.2-.3-.3-.4c-.4-.4-.7-.9-1-1.4c-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8c-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z",fill:"currentColor"},null,-1),s=[a];l["Z"]=(0,n.aZ)({name:"ControlOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",c,s)}})},88350:function(e,l,t){var n=t(73396);const c={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},a=(0,n._)("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"currentColor"},null,-1),s=[a];l["Z"]=(0,n.aZ)({name:"DeleteOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",c,s)}})},18761:function(e,l,t){var n=t(73396);const c={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},a=(0,n._)("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1),s=[a];l["Z"]=(0,n.aZ)({name:"EditOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",c,s)}})},60841:function(e,l,t){var n=t(73396);const c={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},a=(0,n._)("defs",null,null,-1),s=(0,n._)("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),o=(0,n._)("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),r=[a,s,o];l["Z"]=(0,n.aZ)({name:"PlusOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",c,r)}})},26187:function(e,l,t){t.d(l,{F3:function(){return i},JD:function(){return s},RB:function(){return a},_d:function(){return o},fn:function(){return u},lR:function(){return d},ul:function(){return r}});var n=t(6618);const c="/admin/system/sysRole";function a({page:e,pageSize:l},t){return n.d.request({url:`${c}/${e}/${l}`,method:"get",params:t})}function s(e){return n.d.request({url:`${c}/${e}`,method:"delete"},{successMessageText:"删除成功"})}function o(e){return n.d.request({url:`${c}`,method:"POST",data:e},{successMessageText:"添加成功"})}function r(e){return n.d.request({url:`${c}`,method:"PUT",data:e},{successMessageText:"更改成功"})}function u(e){return n.d.request({url:`${c}/batch`,method:"DELETE",data:e},{successMessageText:"批量删除成功"})}function i(e){return n.d.request({url:`${c}/toAssign/${e}`,method:"get"})}function d(e){return n.d.request({url:`${c}/doAssign`,method:"post",data:e},{successMessageText:"分配成功"})}},80502:function(e,l,t){t.r(l),t.d(l,{default:function(){return T}});var n=t(73396),c=t(87139);function a(e,l,t,a,s,o){const r=(0,n.up)("BasicForm"),u=(0,n.up)("PlusOutlined"),i=(0,n.up)("n-icon"),d=(0,n.up)("n-button"),m=(0,n.up)("n-space"),h=(0,n.up)("BasicTable"),w=(0,n.up)("n-input"),p=(0,n.up)("n-form-item"),g=(0,n.up)("n-checkbox"),f=(0,n.up)("n-checkbox-group"),v=(0,n.up)("n-form"),k=(0,n.up)("n-modal"),b=(0,n.up)("n-input-group"),y=(0,n.up)("n-card");return(0,n.wg)(),(0,n.j4)(y,{bordered:!1,class:"proCard table"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onRegister:e.register,onSubmit:e.handleSubmit,onReset:e.handleReset},null,8,["onRegister","onSubmit","onReset"]),(0,n.Wm)(h,{columns:e.columns,request:e.loadDataTable,"row-key":e=>e.id,ref:"actionRef",actionColumn:e.actionColumn,"scroll-x":1e3,pagination:e.pagination,onFetchSuccess:e.fetchSuccess,"onUpdate:checkedRowKeys":e.onCheckedRow},{tableTitle:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[e.hasAddPermission?((0,n.wg)(),(0,n.j4)(d,{key:0,strong:"",secondary:"",type:"primary",onClick:e.addTable},{icon:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1})])),default:(0,n.w5)((()=>[(0,n.Uk)(" 添加 ")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])),_:1})])),_:1},8,["columns","request","row-key","actionColumn","pagination","onFetchSuccess","onUpdate:checkedRowKeys"]),(0,n.Wm)(k,{show:e.showAssignModal,"onUpdate:show":l[3]||(l[3]=l=>e.showAssignModal=l),"show-icon":!1,preset:"dialog",title:"分配角色"},{action:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onClick:l[2]||(l[2]=()=>e.showAssignModal=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(d,{type:"info",loading:e.formBtnLoading,onClick:e.confirmAssignForm},{default:(0,n.w5)((()=>[(0,n.Uk)("确定")])),_:1},8,["loading","onClick"])])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{model:e.assignFormParams,"label-placement":"left","label-width":80,class:"py-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"用户名",path:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{disabled:"",value:e.assignFormParams.username,"onUpdate:value":l[0]||(l[0]=l=>e.assignFormParams.username=l)},null,8,["value"])])),_:1}),(0,n.Wm)(p,{label:"角色列表",path:"roleIdList"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{checked:e.selectAll,label:"全选","onUpdate:checked":e.handleSelectAll,indeterminate:e.indeterminate},null,8,["checked","onUpdate:checked","indeterminate"])])),_:1}),(0,n.Wm)(p,{label:" ",path:"roleIdList"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{value:e.assignFormParams.roleIdList,"onUpdate:value":[l[1]||(l[1]=l=>e.assignFormParams.roleIdList=l),e.handleRoleSelected]},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.allRoleList,((e,l)=>((0,n.wg)(),(0,n.j4)(g,{key:`${l}-${e.id}`,value:e.id},{default:(0,n.w5)((()=>[(0,n.Uk)((0,c.zw)(e.roleName),1)])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["value","onUpdate:value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["show"]),e.hasAddPermission?((0,n.wg)(),(0,n.j4)(k,{key:0,show:e.showUserModal,"onUpdate:show":l[9]||(l[9]=l=>e.showUserModal=l),"show-icon":!1,preset:"dialog",title:"新建",onAfterLeave:e.clearUserForm},{action:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onClick:l[8]||(l[8]=()=>e.showUserModal=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(d,{type:"info",loading:e.formBtnLoading,onClick:e.confirmUserForm},{default:(0,n.w5)((()=>[(0,n.Uk)("确定")])),_:1},8,["loading","onClick"])])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{model:e.userFormParams,rules:e.rules,ref:"userFormRef","label-placement":"left","label-width":80,class:"py-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"用户名",path:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{placeholder:"请输入用户名",value:e.userFormParams.username,"onUpdate:value":l[4]||(l[4]=l=>e.userFormParams.username=l),clearable:""},null,8,["value"])])),_:1}),e.isEdit?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(p,{key:0,label:"密码",path:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{placeholder:"请输入密码",value:e.userFormParams.password,"onUpdate:value":l[5]||(l[5]=l=>e.userFormParams.password=l),clearable:""},null,8,["value"]),(0,n.Wm)(d,{secondary:"",type:"info",onClick:e.setDeafultPwd},{default:(0,n.w5)((()=>[(0,n.Uk)("默认")])),_:1},8,["onClick"])])),_:1})])),_:1})),(0,n.Wm)(p,{label:"姓名",path:"name"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{placeholder:"请输入姓名",value:e.userFormParams.name,"onUpdate:value":l[6]||(l[6]=l=>e.userFormParams.name=l),clearable:""},null,8,["value"])])),_:1}),(0,n.Wm)(p,{label:"手机",path:"phone"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{placeholder:"请输入手机",value:e.userFormParams.phone,"onUpdate:value":l[7]||(l[7]=l=>e.userFormParams.phone=l),clearable:""},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","onAfterLeave"])):(0,n.kq)("",!0)])),_:1})}var s=t(91260),o=t(98978),r=t(44870),u=t(76684),i=t(59814),d=t(20246);const m=({currentIndex:e,switchStatus:l})=>[{type:"selection",key:"selection"},{title:"序号",key:"index",width:60,render:(...[,l])=>e()+l+1},{title:"用户名",key:"username",editRule:!0},{title:"姓名",key:"name",editRule:!0},{title:"手机",key:"phone",width:120,editRule:!0},{title:"岗位",key:"dept",editRule:!0},{title:"部门",key:"post",editRule:!0},{title:"所属角色",key:"roleName",editRule:!0},{title:"状态",key:"status",render(e){return(0,n.h)(d.Z,{value:1===e.status,onClick:()=>l(e)})}},{title:"创建时间",key:"createTime"}];var h=t(6618);const w="/admin/system/sysUser";function p({page:e,pageSize:l},t){return h.d.request({url:`${w}/${e}/${l}`,method:"get",params:t})}function g(e){return h.d.request({url:`${w}/${e}`,method:"delete"},{successMessageText:"删除成功"})}function f(e){return h.d.request({url:`${w}`,method:"POST",data:e},{successMessageText:"添加成功"})}function v(e){return h.d.request({url:`${w}`,method:"PUT",data:e},{successMessageText:"更改成功"})}function k(e,l){return h.d.request({url:`${w}/updateStatus/${e}/${l}`,method:"get"},{successMessageText:"状态更改成功"})}var b=t(60841),y=t(88350),_=t(18761),x=t(90280),P=t(26187),U=t(5373);const q={username:{required:!0,trigger:["blur","input"],message:"请输入用户名"},password:{key:"password",required:!0,trigger:["blur","input"],message:"请输入密码"}},C=[{field:"keyword",component:"NInput",label:"关键词",defaultValue:"",labelMessge:"关键词",componentProps:{placeholder:"用户名/姓名/手机号码"}},{field:"range",component:"NDatePicker",label:"时间范围",labelMessge:"开始日期",componentProps:{placeholder:"开始日期",type:"datetimerange",clearable:!0,shortcuts:{"近2小时":()=>{const e=(new Date).getTime();return[e-72e5,e]}}}}];var F=(0,n.aZ)({components:{PlusOutlined:b.Z,BasicForm:u.O,BasicTable:i.M},setup(){const e=(0,r.iH)(!1),l=(0,s.U)(),{hasPermission:t}=(0,U.g)(),c=(0,o.R)(),a=(0,r.iH)(),d=(0,r.iH)(),h=(0,r.iH)([]),w=(0,r.iH)(1),b=(0,r.iH)(!1),F=(0,r.iH)(!1),R=(0,r.iH)(!1),W=(0,r.iH)(!1),T=m({currentIndex(){return(0,r.SU)(w)},switchStatus:async e=>{const{id:l,status:t}=e,n=1===t?0:1;e.status=await k(l,n)}}),M=()=>({keyword:"",createTimeBegin:"",createTimeEnd:""}),S=(0,r.qj)(M()),L=(0,n.Fl)((()=>t(["system_user_add"]))),$=(0,r.qj)({width:150,title:"操作",key:"action",fixed:"right",align:"center",render(e){return(0,n.h)(i.p,{style:"text",showLabel:!1,actions:D(e)})}}),z=(0,r.qj)({prefix:e=>`共 ${e.itemCount} 条`}),H=()=>({id:null,username:"",password:"",name:"",phone:""}),A=(0,r.qj)(H()),I=(0,r.qj)({username:"",userId:null,roleIdList:[]}),j=(0,r.iH)([]),B=(0,n.Fl)((()=>0!==I.roleIdList.length&&(0,r.SU)(j).length!=I.roleIdList.length));function D(e){return[{label:"删除",type:"error",color:"red",icon:y.Z,onClick:G.bind(null,e),ifShow:()=>!0,auth:["system_user_remove"]},{label:"编辑",type:"primary",icon:_.Z,onClick:Q.bind(null,e),ifShow:()=>!0,auth:["system_user_update"]},{label:"分配角色",type:"warning",icon:x.Z,onClick:X.bind(null,e),ifShow:()=>!0,auth:["system_user_assign"]}]}const[Z,{setProps:O}]=(0,u.c)({gridProps:{cols:2},showAdvancedButton:!0,labelWidth:80,schemas:C});function E(e){const{keyword:l,range:t}=e;Object.assign(S,{keyword:l,createTimeBegin:t?.[0],createTimeEnd:t?.[1]}),console.log(S),J()}function V(){Object.assign(S,M()),J()}async function N(e){return await p({...e},S)}function K(){e.value=!1,F.value=!0}function J(){a.value.reload()}function Y(e){h.value=e}function G(e){c.warning({title:"提示",content:`您想删除${e.name}`,positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await g(e.id),J()},onNegativeClick:()=>{}})}function Q(l){const{id:t,username:n,password:c,name:a,phone:s}=l;e.value=!0,F.value=!0,Object.assign(A,{id:t,username:n,password:c,name:a,phone:s})}async function X(e){const{username:t,id:n}=e,c=await(0,P.F3)(n),{assignRoleList:a,allRoles:s}=c;if(s&&0===s.length)return l.info("无角色信息");const o=a.map((e=>e.id));Object.assign(I,{username:t,userId:n,roleIdList:o}),j.value=s,b.value=!0}function ee(){w.value=(a.value.pagination.page-1)*a.value.pagination.pageSize}function le(){if(B.value||!W.value){const e=(0,r.SU)(j).map((e=>e.id));I.roleIdList=e}else I.roleIdList=[];W.value=!W.value}function te(e){W.value=e.length===I.roleIdList.length}function ne(){R.value=!0,(0,P.lR)(I).then((()=>{b.value=!1,R.value=!1})).catch((()=>{R.value=!1}))}function ce(){A.password="123456",d.value?.validate((e=>{e&&console.log(e)}),(e=>"password"===e?.key))}function ae(){Object.assign(A,H())}async function se(t){t.preventDefault(),R.value=!0,d.value?.validate((async t=>{t?(console.log(t),l.error("请填写完整信息")):(e.value?await v(A):await f(A),setTimeout((()=>{F.value=!1,J()}))),R.value=!1}))}return{rules:q,isEdit:e,schemas:C,columns:T,actionRef:a,pagination:z,actionColumn:$,register:Z,setProps:O,handleSubmit:E,handleReset:V,addTable:K,loadDataTable:N,onCheckedRow:Y,fetchSuccess:ee,formBtnLoading:R,showAssignModal:b,assignFormParams:I,allRoleList:j,selectAll:W,handleRoleSelected:te,handleSelectAll:le,indeterminate:B,confirmAssignForm:ne,showUserModal:F,userFormRef:d,userFormParams:A,clearUserForm:ae,setDeafultPwd:ce,confirmUserForm:se,hasAddPermission:L}}}),R=t(40089);const W=(0,R.Z)(F,[["render",a]]);var T=W}}]);
//# sourceMappingURL=133.4d4b3c35.js.map