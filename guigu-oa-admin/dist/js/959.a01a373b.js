"use strict";(self["webpackChunkguigu_oa_admin"]=self["webpackChunkguigu_oa_admin"]||[]).push([[959],{92799:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("path",{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512L347.9 657.9A7.95 7.95 0 0 0 354 671z",fill:"currentColor"},null,-1),u=(0,l._)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:"currentColor"},null,-1),o=[i,u];t["Z"]=(0,l.aZ)({name:"CloseSquareOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,o)}})},88350:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"currentColor"},null,-1),u=[i];t["Z"]=(0,l.aZ)({name:"DeleteOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,u)}})},18761:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1),u=[i];t["Z"]=(0,l.aZ)({name:"EditOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,u)}})},60841:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("defs",null,null,-1),u=(0,l._)("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),o=(0,l._)("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),r=[i,u,o];t["Z"]=(0,l.aZ)({name:"PlusOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,r)}})},37683:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),u=[i];t["Z"]=(0,l.aZ)({name:"SaveOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,u)}})},70594:function(e,t,n){var l=n(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},i=(0,l._)("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1),u=[i];t["Z"]=(0,l.aZ)({name:"SearchOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",a,u)}})},88628:function(e,t,n){n.d(t,{Af:function(){return i},JD:function(){return o},X6:function(){return r},_8:function(){return u},iO:function(){return s}});var l=n(6618);const a="/admin/system/sysMenu";function i(){return l.d.request({url:`${a}/findNodes`,method:"get"})}function u(e){return l.d.request({url:`${a}`,method:"put",data:e},{successMessageText:"修改成功"})}function o(e){return l.d.request({url:`${a}/${e}`,method:"DELETE"},{successMessageText:"删除成功"})}function r(e){return l.d.request({url:`${a}/menuIdType/${e}`,method:"get"})}function s(e){return l.d.request({url:`${a}/doAssign`,method:"post",data:e})}},65446:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var l=n(73396),a=n(87139);const i={class:"flex item-center"},u={class:"flex items-center"},o={class:"w-full menu"},r={class:"py-3 menu-list"},s={key:0,class:"flex items-center justify-center py-4"};function c(e,t,n,c,d,m){const p=(0,l.up)("DownOutlined"),f=(0,l.up)("n-icon"),w=(0,l.up)("n-button"),h=(0,l.up)("n-dropdown"),v=(0,l.up)("AlignLeftOutlined"),g=(0,l.up)("n-space"),x=(0,l.up)("SearchOutlined"),b=(0,l.up)("n-input"),_=(0,l.up)("n-spin"),y=(0,l.up)("n-tree"),k=(0,l.up)("n-card"),C=(0,l.up)("n-gi"),W=(0,l.up)("FormOutlined"),z=(0,l.up)("n-alert"),H=(0,l.up)("n-form-item"),O=(0,l.up)("PlusOutlined"),M=(0,l.up)("BasicTable"),Z=(0,l.up)("n-form"),q=(0,l.up)("n-grid");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(q,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{span:"1"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{segmented:{content:!0},bordered:!1,size:"small"},{header:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{trigger:"hover",onSelect:e.selectAddMenu,options:e.addMenuOptions},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{type:"info",ghost:"","icon-placement":"right"},{icon:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(f,{size:"14"},{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Uk)(" 添加菜单 ")])),_:1})])),_:1},8,["onSelect","options"]),(0,l.Wm)(w,{type:"info",ghost:"","icon-placement":"left",onClick:e.packHandle},{icon:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(f,{size:"14"},{default:(0,l.w5)((()=>[(0,l.Wm)(v)])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Uk)(" 全部"+(0,a.zw)(e.expandedKeys.length?"收起":"展开")+" ",1)])),_:1},8,["onClick"])])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l.Wm)(b,{type:"input",value:e.pattern,"onUpdate:value":t[0]||(t[0]=t=>e.pattern=t),placeholder:"输入菜单名称搜索"},{suffix:(0,l.w5)((()=>[(0,l.Wm)(f,{size:"18",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(x)])),_:1})])),_:1},8,["value"]),(0,l._)("div",r,[e.loading?((0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(_,{size:"medium"})])):((0,l.wg)(),(0,l.j4)(y,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:e.pattern,data:e.treeData,expandedKeys:e.expandedKeys,style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":e.selectedTree,"onUpdate:expandedKeys":e.onExpandedKeys},null,8,["pattern","data","expandedKeys","onUpdate:selectedKeys","onUpdate:expandedKeys"]))])])])),_:1})])),_:1}),(0,l.Wm)(C,{span:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{segmented:{content:!0},bordered:!1,size:"small"},{header:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{size:"18"},{default:(0,l.w5)((()=>[(0,l.Wm)(W)])),_:1}),(0,l._)("span",null,"编辑菜单"+(0,a.zw)(e.treeItemTitle?`：${e.treeItemTitle}`:""),1)])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(z,{type:"info",closable:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" 从菜单列表选择一项后，进行编辑")])),_:1}),e.isEditMenu?((0,l.wg)(),(0,l.j4)(Z,{key:0,model:e.formParams,rules:e.rules,ref:"formRef","label-placement":"left","label-width":100,class:"py-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{label:"类型",path:"type"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,a.zw)(0===e.formParams.type?"一级菜单":"二级菜单"),1)])),_:1}),(0,l.Wm)(H,{label:"标题",path:"label"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{placeholder:"请输入标题",value:e.formParams.label,"onUpdate:value":t[1]||(t[1]=t=>e.formParams.label=t)},null,8,["value"])])),_:1}),(0,l.Wm)(H,{label:"副标题",path:"subtitle"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{placeholder:"请输入副标题",value:e.formParams.subtitle,"onUpdate:value":t[2]||(t[2]=t=>e.formParams.subtitle=t)},null,8,["value"])])),_:1}),(0,l.Wm)(H,{label:"路径",path:"path"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{placeholder:"请输入路径",value:e.formParams.path,"onUpdate:value":t[3]||(t[3]=t=>e.formParams.path=t)},null,8,["value"])])),_:1}),(0,l.Wm)(H,{label:"菜单权限",path:"auth"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{placeholder:"请输入权限，多个权限用，分割",value:e.formParams.auth,"onUpdate:value":t[4]||(t[4]=t=>e.formParams.auth=t)},null,8,["value"])])),_:1}),e.operationAuth?((0,l.wg)(),(0,l.j4)(H,{key:0,label:"操作权限",path:"auth",class:"no-flex"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(M,{key:e.timer,columns:e.columns,actionColumn:e.actionColumn,ref:"actionRef",pagination:!1,size:"small",canResize:!1,dataSource:e.operationAuth},{tableTitle:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"small",strong:"",secondary:"",type:"primary"},{icon:(0,l.w5)((()=>[(0,l.Wm)(f,{size:"16"},{default:(0,l.w5)((()=>[(0,l.Wm)(O)])),_:1})])),default:(0,l.w5)((()=>[(0,l.Uk)(" 添加 ")])),_:1})])),_:1},8,["columns","actionColumn","dataSource"]))])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(H,{path:"auth",style:{"margin-left":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{type:"primary",loading:e.subLoading,onClick:e.formSubmit},{default:(0,l.w5)((()=>[(0,l.Uk)("保存修改")])),_:1},8,["loading","onClick"]),(0,l.Wm)(w,{onClick:e.handleReset},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1},8,["onClick"]),(0,l.Wm)(w,{onClick:e.handleDel},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])}var d=n(44870),m=n(97109);const p={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},f=(0,l._)("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),w=[f];var h=(0,l.aZ)({name:"AlignLeftOutlined",render:function(e,t){return(0,l.wg)(),(0,l.iD)("svg",p,w)}}),v=n(70594),g=n(36326),x=n(60841),b=n(88350),_=n(18761),y=n(37683),k=n(92799),C=n(88628),W=n(42325),z=n(91260),H=n(98978),O=n(59814),M=n(5373);const Z={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},q=[{title:"名称",key:"label",width:120},{title:"权限",key:"auth",edit:!0,editRow:!0,editComponent:"NInput"}];var D=(0,l.aZ)({components:{DownOutlined:m.Z,AlignLeftOutlined:h,SearchOutlined:v.Z,FormOutlined:g.Z,BasicTable:O.M,PlusOutlined:x.Z},setup(){const e=(0,d.iH)(null),t=(0,d.iH)(),n=(0,d.iH)(""),a=(0,z.U)(),i=(0,H.R)(),{hasPermission:u}=(0,M.g)();let o=(0,d.iH)([]),r=(0,d.iH)([]);const s=(0,d.iH)([]),c=(0,d.iH)(!0),m=(0,d.iH)(!1),p=(0,d.iH)(!1),f=(0,d.iH)(!1),w=(0,d.iH)(""),h=(0,d.iH)(""),v=(0,l.Fl)((()=>!o.value.length)),g=(0,d.iH)([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:v}]),x=(0,d.qj)({type:1,label:"",subtitle:"",path:"",auth:"",openType:1}),D=(0,d.iH)([]),U=(0,d.iH)(""),L=(0,d.iH)(""),T=(0,d.qj)({width:150,title:"操作",key:"action",fixed:"right",align:"center",render(e){return(0,l.h)(O.p,{style:"text",showLabel:!1,actions:P(e)})}});function P(e){return e.editable?[{label:"保存",type:"success",icon:y.Z,onClick:E.bind(null,e)},{label:"取消",type:"warning",icon:k.Z,onClick:A.bind(null,e)}]:[{label:"删除",type:"error",color:"red",icon:b.Z,onClick:K.bind(null,e),ifShow:()=>!0,auth:["system_role"]},{label:"编辑",type:"primary",icon:_.Z,onClick:S.bind(null,e),ifShow:()=>!0,auth:["system_role"]}]}function S(e){L.value=e.key,e.onEdit?.(!0)}function A(e){L.value="",e.onEdit?.(!1,!1)}async function E(e){const t=await(e.onEdit?.(!1,!0));if(t){L.value="";const{id:t,auth:n}=e;await(0,C._8)({id:t,auth:n})}}function K(e){console.log(e),i.info({title:"提示",content:`您想删除${e.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{console.log(e)},onNegativeClick:()=>{}})}function j(){}function B(){r.value.length?r.value=[]:r.value=(0,d.SU)(s).map((e=>{if(e.subtitle)return e.subtitle;e.id}))}function R(e){if(e.length){const t=(0,W.lv)((0,d.SU)(s),e[0]);o.value=e,w.value=t.label,Object.assign(x,t),D.value=t?.operation,n.value=(new Date).getTime(),p.value=!0}else p.value=!1,o.value=[],w.value="",D.value=[]}function V(){i.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{if(!u(["system_menu_remove"]))return a.error("抱歉，您没有该权限");const{id:e}=x;await(0,C.JD)(e),a.success("删除成功")}})}function $(){const e=(0,W.lv)((0,d.SU)(s),o.value[0]);Object.assign(x,e)}function I(){e.value?.validate((async e=>{if(e)a.error("请填写完整信息");else{if(!u(["system_menu_update"]))return a.error("抱歉，您没有该权限");const{id:e,label:t,subtitle:n,path:l,auth:i}=x;await(0,C._8)({id:e,title:t,subtitle:n,path:l,auth:i})}}))}function F(){}function N(e){r.value=e}return(0,l.bv)((async()=>{const e=await(0,C.Af)(),t=e.map((e=>e.id));Object.assign(x,t);const{treeMenuList:n}=(0,W.Xm)(e);s.value=n,c.value=!1})),{rules:Z,formRef:e,actionRef:t,timer:n,treeData:s,formParams:x,operationAuth:D,loading:c,subLoading:m,isEditMenu:p,pattern:h,expandedKeys:r,addMenuOptions:g,treeItemTitle:w,isAuthOperation:f,newOperation:U,selectAddMenu:j,packHandle:B,selectedTree:R,onExpandedKeys:N,handleDel:V,handleReset:$,addOperation:F,formSubmit:I,columns:q,actionColumn:T}}}),U=n(40089);const L=(0,U.Z)(D,[["render",c]]);var T=L}}]);
//# sourceMappingURL=959.a01a373b.js.map