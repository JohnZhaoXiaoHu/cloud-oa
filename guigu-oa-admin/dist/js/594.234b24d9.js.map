{"version":3,"file":"js/594.234b24d9.js","mappings":"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","sources":["webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/CloseSquareOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/DeleteOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/EditOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/PlusOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/SaveOutlined.js","webpack://guigu-oa-admin/./src/views/wechat/menu/columns.js","webpack://guigu-oa-admin/./src/api/wechat/menu.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/CloudSyncOutlined.js","webpack://guigu-oa-admin/./src/views/wechat/menu/menu.vue","webpack://guigu-oa-admin/./src/views/wechat/menu/menu.vue?fc27"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512L347.9 657.9A7.95 7.95 0 0 0 354 671z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'CloseSquareOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'DeleteOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'EditOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'defs',\n  null,\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_5 = [_hoisted_2, _hoisted_3, _hoisted_4]\nexport default defineComponent({\n  name: 'PlusOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_5)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'SaveOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { NTag } from 'naive-ui';\nimport { h } from 'vue';\n\nexport const columns = [\n  {\n    title: '名称',\n    key: 'name',\n    width: 250,\n    edit: true,\n    editRule: true,\n    editRow: true,\n    editComponent: 'NInput',\n  },\n  {\n    title: '类型',\n    key: 'type',\n    render(row) {\n      if (!row.type) return;\n      return h(\n        NTag,\n        {\n          type: 'info',\n          bordered: false,\n        },\n        {\n          default: () => {\n            if (row.type === 'view') {\n              return '网页';\n            }\n            if (row.type === 'click') {\n              return '点击';\n            }\n            if (row.type === 'miniprogram') {\n              return '小程序';\n            }\n          },\n        }\n      );\n    },\n  },\n  {\n    title: '菜单URL',\n    key: 'url',\n    edit: true,\n    editRow: true,\n    editComponent: 'NInput',\n  },\n  {\n    title: '菜单KEY',\n    key: 'menuKey',\n    edit: true,\n    editRow: true,\n    editComponent: 'NInput',\n  },\n  {\n    title: '排序号',\n    key: 'sort',\n    edit: true,\n    editRow: true,\n    editComponent: 'NInputNumber',\n  },\n];\n","import { http } from '@/utils/http/axios';\n\nconst prefix = '/admin/wechat/menu';\n\n/**\n * @description: 同步菜单\n */\nexport function syncMenu() {\n  return http.request(\n    {\n      url: `${prefix}/sync`,\n      method: 'put',\n    },\n    {\n      successMessageText: '菜单同步成功',\n    }\n  );\n}\n\n/**\n * @description: 删除菜单\n */\nexport function deleteMenu() {\n  return http.request(\n    {\n      url: `${prefix}/delete`,\n      method: 'delete',\n    },\n    {\n      successMessageText: '菜单已删除',\n    }\n  );\n}\n\n/**\n * @description: 获取菜单列表\n */\nexport function getMenuList() {\n  return http.request({\n    url: `${prefix}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 更新菜单信息\n */\nexport function updateMenu(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'put',\n      data,\n    },\n    {\n      successMessageText: '更新成功',\n    }\n  );\n}\n\n/**\n * @description: 新增菜单信息\n */\nexport function addMenu(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'post',\n      data,\n    },\n    {\n      successMessageText: '增加成功',\n    }\n  );\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6C64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9c-27-3.4-52.5-15.2-72.1-34.5c-24-23.5-37.2-55.1-37.2-88.6c0-28 9.1-54.4 26.2-76.4c16.7-21.4 40.2-36.9 66.1-43.7l37.9-10l13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5c14.9-19.2 32.6-36 52.4-50c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50c15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6l37.8 10c54.2 14.4 92.1 63.7 92.1 120c0 33.6-13.2 65.1-37.2 88.6c-19.5 19.2-44.9 31.1-71.9 34.5c-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8c101.7-9.2 182.5-94 183.2-198.2c.6-93.4-62.7-172.1-148.6-194.9z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6c25.4-25.5 60-39.8 96-39.8c36.2 0 70.3 14.1 96 39.8c1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 0 0 3 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6c-107.4 0-195 85.1-199.4 191.7c-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6c-1.8 33.5-15.7 64.7-39.5 88.6c-25.4 25.5-60 39.8-96 39.8c-36.2 0-70.3-14.1-96-39.8c-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 0 0-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6c107.4 0 195-85.1 199.4-191.7c.2-4.5-3.4-8.3-8-8.3z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'CloudSyncOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","<template>\n  <n-card :bordered=\"false\" class=\"proCard table\">\n    <BasicTable\n      :columns=\"columns\"\n      :request=\"loadDataTable\"\n      :row-key=\"(row) => row.id\"\n      ref=\"actionRef\"\n      :actionColumn=\"actionColumn\"\n      :scroll-x=\"1000\"\n      :pagination=\"false\"\n    >\n      <template #tableTitle>\n        <n-space>\n          <!-- 新增菜单 -->\n          <n-button\n            v-if=\"hasAddPermission\"\n            strong\n            secondary\n            type=\"primary\"\n            @click=\"() => (showAddModal = true)\"\n          >\n            <template #icon>\n              <n-icon>\n                <PlusOutlined />\n              </n-icon>\n            </template>\n            新增菜单\n          </n-button>\n          <!-- 同步菜单 -->\n          <n-button\n            v-if=\"hasSyncPermission\"\n            strong\n            secondary\n            type=\"success\"\n            @click=\"createMenu\"\n          >\n            <template #icon>\n              <n-icon>\n                <CloudSyncOutlined />\n              </n-icon>\n            </template>\n            同步菜单\n          </n-button>\n          <!-- 删除菜单 -->\n          <n-button\n            v-if=\"hasDeletePermission\"\n            strong\n            secondary\n            type=\"error\"\n            @click=\"clearMenu\"\n          >\n            <template #icon>\n              <n-icon>\n                <DeleteOutlined />\n              </n-icon>\n            </template>\n            删除菜单\n          </n-button>\n        </n-space>\n      </template>\n    </BasicTable>\n    <!-- 新建弹窗Modal -->\n    <n-modal\n      v-model:show=\"showAddModal\"\n      v-if=\"hasAddPermission\"\n      :show-icon=\"false\"\n      preset=\"dialog\"\n      title=\"新建\"\n    >\n      <n-form\n        :model=\"params\"\n        :rules=\"rules\"\n        ref=\"formRef\"\n        label-placement=\"left\"\n        :label-width=\"80\"\n        class=\"py-4\"\n      >\n        <n-form-item label=\"父级菜单\" path=\"parentId\">\n          <n-select\n            placeholder=\"请选择父级菜单\"\n            v-model:value=\"params.parentId\"\n            :options=\"parentOptions\"\n            @update:value=\"handParentIdChange\"\n          />\n        </n-form-item>\n        <n-form-item label=\"菜单名称\" path=\"name\">\n          <n-input placeholder=\"请输入菜单名称\" v-model:value=\"params.name\" />\n        </n-form-item>\n        <n-form-item label=\"菜单类型\" path=\"type\">\n          <n-select\n            placeholder=\"请选择菜单类型\"\n            v-model:value=\"params.type\"\n            :options=\"typeOptions\"\n          />\n        </n-form-item>\n        <n-form-item label=\"菜单URL\" path=\"url\">\n          <n-input placeholder=\"请输入菜单URL\" v-model:value=\"params.url\" />\n        </n-form-item>\n        <n-form-item\n          label=\"菜单KEY\"\n          path=\"menuKey\"\n          v-show=\"params.type === 'click'\"\n        >\n          <n-input placeholder=\"请输入菜单KEY\" v-model:value=\"params.menuKey\" />\n        </n-form-item>\n        <n-form-item label=\"排序号\" path=\"sort\">\n          <n-input-number placeholder=\"排序号\" v-model:value=\"params.sort\" />\n        </n-form-item>\n      </n-form>\n      <!-- 操作插槽 -->\n      <template #action>\n        <n-space>\n          <n-button @click=\"() => (showAddModal = false)\">取消</n-button>\n          <n-button type=\"info\" @click=\"confirmForm\">确定</n-button>\n        </n-space>\n      </template>\n    </n-modal>\n  </n-card>\n</template>\n<script>\nexport default {\n  name: 'WechatMenu',\n};\n</script>\n<script setup>\nimport { columns } from './columns';\nimport { BasicTable, TableAction } from '@/components/Table';\nimport {\n  getMenuList,\n  updateMenu,\n  syncMenu,\n  deleteMenu,\n  addMenu,\n} from '@/api/wechat/menu';\nimport { h, ref, reactive, computed } from 'vue';\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  SaveOutlined,\n  CloseSquareOutlined,\n  CloudSyncOutlined,\n  PlusOutlined,\n} from '@vicons/antd';\nimport { useDialog } from 'naive-ui';\nimport { usePermission } from '@/hooks/web/usePermission';\n\nconst typeOptions = [\n  { label: '网页', value: 'view' },\n  { label: '点击', value: 'click' },\n  { label: '小程序', value: 'miniprogram' },\n];\n\nconst rules = {\n  name: {\n    required: true,\n    trigger: ['blur', 'input'],\n    message: '请输入菜单名称',\n  },\n  roleCode: {\n    required: true,\n    trigger: ['blur', 'input'],\n    message: '请输入角色编码',\n  },\n};\n\nconst dialog = useDialog();\nconst actionRef = ref(null);\nconst formRef = ref(null);\nconst showAddModal = ref(false);\nconst parentOptions = ref([{ label: '父菜单', value: 0 }]);\nconst currentEditKeyRef = ref('');\nconst { hasPermission } = usePermission();\nconst hasSyncPermission = computed(() => {\n  return hasPermission(['wechat_menu_sync']);\n});\nconst hasDeletePermission = computed(() => {\n  return hasPermission(['wechat_menu_delete']);\n});\nconst hasAddPermission = computed(() => {\n  return hasPermission(['wechat_menu_add']);\n});\n\nconst defalutParams = () => {\n  return {\n    parentId: 0,\n    name: '',\n    type: 'view',\n    url: '',\n    menuKey: '',\n    sort: 1,\n  };\n};\nconst params = reactive(defalutParams());\n// 表格列信息\nconst actionColumn = reactive({\n  width: 150,\n  title: '操作',\n  key: 'action',\n  fixed: 'right',\n  align: 'center',\n  render(record) {\n    return h(TableAction, {\n      style: 'text',\n      showLabel: false,\n      actions: createAction(record),\n    });\n  },\n});\n\nfunction createAction(record) {\n  if (!record.editable) {\n    return [\n      {\n        label: '编辑',\n        type: 'primary',\n        icon: EditOutlined,\n        onClick: handleEdit.bind(null, record),\n        ifShow: () => {\n          return true;\n        },\n        auth: ['wechat_menu_update'],\n      },\n      {\n        label: '删除',\n        type: 'error',\n        // 配置color会覆盖type\n        color: 'red',\n        icon: DeleteOutlined,\n        onClick: handleDelete.bind(null, record),\n        // 根据业务控制是否显示 isShow 和 auth 是并且关系\n        ifShow: () => {\n          return true;\n        },\n        // 根据权限控制是否显示: 有权限，会显示，支持多个\n        auth: ['wechat_menu_remove'],\n      },\n    ];\n  } else {\n    return [\n      {\n        label: '保存',\n        type: 'success',\n        icon: SaveOutlined,\n        onClick: handleSave.bind(null, record),\n      },\n      {\n        label: '取消',\n        type: 'warning',\n        icon: CloseSquareOutlined,\n        onClick: handleCancel.bind(null, record),\n      },\n    ];\n  }\n}\n\n// 编辑点击事件\nfunction handleEdit(record) {\n  currentEditKeyRef.value = record.key;\n  record.onEdit?.(true);\n}\n// 取消编辑事件\nfunction handleCancel(record) {\n  currentEditKeyRef.value = '';\n  record.onEdit?.(false, false);\n}\n// 处理编辑的保存事件\nasync function handleSave(record) {\n  const pass = await record.onEdit?.(false, true);\n  if (pass) {\n    currentEditKeyRef.value = '';\n    const { id, name, url, menuKey, order } = record;\n    // 提交更新\n    await updateMenu({ id, name, url, menuKey, order });\n  }\n}\n\nconst handleDelete = (record) => {\n  dialog.info({\n    title: '提示',\n    content: `您想删除${record.name}`,\n    positiveText: '确定',\n    negativeText: '取消',\n    onPositiveClick: async () => {\n      // await removeById(record.id);\n      reloadTable();\n    },\n    onNegativeClick: () => {},\n  });\n};\n\nconst loadDataTable = async () => {\n  const list = await getMenuList();\n  // 组装父菜单选择属性\n  parentOptions.value = list.map((item, index) => {\n    return { label: item.name, value: item.id, index };\n  });\n  parentOptions.value.unshift({ label: '父菜单', value: 0 });\n  params.sort = list.length + 1;\n  return {\n    records: list,\n  };\n};\n\nfunction reloadTable() {\n  actionRef.value.reload();\n}\n\nfunction handParentIdChange(_, option) {\n  const { data } = actionRef.value.tableElRef;\n  const { index } = option;\n  if (index === 0) {\n    // 父菜单\n    params.sort = data.length + 1;\n  } else {\n    params.sort = data[index].children?.length + 1;\n  }\n}\n\nconst confirmForm = async () => {\n  await addMenu(params);\n  showAddModal.value = false;\n  Object.assign(params, defalutParams());\n  reloadTable();\n};\n\nconst createMenu = async () => {\n  dialog.info({\n    title: '提示',\n    content: `您确定上传菜单吗，是否继续？`,\n    positiveText: '确定',\n    negativeText: '取消',\n    onPositiveClick: async () => {\n      await syncMenu();\n    },\n    onNegativeClick: () => {},\n  });\n};\n\nconst clearMenu = async () => {\n  dialog.warning({\n    title: '提示',\n    content: `您确定删除菜单吗，是否继续？`,\n    positiveText: '确定',\n    negativeText: '取消',\n    onPositiveClick: async () => {\n      await deleteMenu();\n    },\n    onNegativeClick: () => {},\n  });\n};\n</script>\n<style scoped></style>\n","import script from \"./menu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./menu.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","xmlns","viewBox","_hoisted_2","_createElementVNode","d","fill","_hoisted_3","_hoisted_4","defineComponent","name","render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_5","columns","title","key","width","edit","editRule","editRow","editComponent","row","type","h","NTag","bordered","default","prefix","syncMenu","http","url","method","successMessageText","deleteMenu","getMenuList","updateMenu","data","addMenu","__default__","typeOptions","label","value","rules","required","trigger","message","roleCode","dialog","useDialog","actionRef","ref","formRef","showAddModal","parentOptions","currentEditKeyRef","hasPermission","usePermission","hasSyncPermission","computed","hasDeletePermission","hasAddPermission","defalutParams","parentId","menuKey","sort","params","reactive","actionColumn","fixed","align","record","TableAction","style","showLabel","actions","createAction","editable","icon","SaveOutlined","onClick","handleSave","bind","CloseSquareOutlined","handleCancel","EditOutlined","handleEdit","ifShow","auth","color","DeleteOutlined","handleDelete","onEdit","async","pass","id","order","info","content","positiveText","negativeText","onPositiveClick","reloadTable","onNegativeClick","loadDataTable","list","map","item","index","unshift","length","records","reload","handParentIdChange","_","option","tableElRef","children","confirmForm","Object","assign","createMenu","clearMenu","warning","__exports__"],"sourceRoot":""}