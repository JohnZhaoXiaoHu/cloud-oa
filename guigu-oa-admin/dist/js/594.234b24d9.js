"use strict";(self["webpackChunkguigu_oa_admin"]=self["webpackChunkguigu_oa_admin"]||[]).push([[594],{92799:function(e,l,t){var n=t(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},u=(0,n._)("path",{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512L347.9 657.9A7.95 7.95 0 0 0 354 671z",fill:"currentColor"},null,-1),c=(0,n._)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:"currentColor"},null,-1),o=[u,c];l["Z"]=(0,n.aZ)({name:"CloseSquareOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",a,o)}})},88350:function(e,l,t){var n=t(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},u=(0,n._)("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"currentColor"},null,-1),c=[u];l["Z"]=(0,n.aZ)({name:"DeleteOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",a,c)}})},18761:function(e,l,t){var n=t(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},u=(0,n._)("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1),c=[u];l["Z"]=(0,n.aZ)({name:"EditOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",a,c)}})},60841:function(e,l,t){var n=t(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},u=(0,n._)("defs",null,null,-1),c=(0,n._)("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),o=(0,n._)("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),i=[u,c,o];l["Z"]=(0,n.aZ)({name:"PlusOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",a,i)}})},37683:function(e,l,t){var n=t(73396);const a={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},u=(0,n._)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),c=[u];l["Z"]=(0,n.aZ)({name:"SaveOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",a,c)}})},69565:function(e,l,t){t.r(l),t.d(l,{default:function(){return Z}});t(30541);var n=t(73396),a=t(44870),u=t(49242),c=t(49464);const o=[{title:"名称",key:"name",width:250,edit:!0,editRule:!0,editRow:!0,editComponent:"NInput"},{title:"类型",key:"type",render(e){if(e.type)return(0,n.h)(c.ZP,{type:"info",bordered:!1},{default:()=>"view"===e.type?"网页":"click"===e.type?"点击":"miniprogram"===e.type?"小程序":void 0})}},{title:"菜单URL",key:"url",edit:!0,editRow:!0,editComponent:"NInput"},{title:"菜单KEY",key:"menuKey",edit:!0,editRow:!0,editComponent:"NInput"},{title:"排序号",key:"sort",edit:!0,editRow:!0,editComponent:"NInputNumber"}];var i=t(59814),r=t(6618);const s="/admin/wechat/menu";function d(){return r.d.request({url:`${s}/sync`,method:"put"},{successMessageText:"菜单同步成功"})}function w(){return r.d.request({url:`${s}/delete`,method:"delete"},{successMessageText:"菜单已删除"})}function p(){return r.d.request({url:`${s}`,method:"get"})}function m(e){return r.d.request({url:`${s}`,method:"put",data:e},{successMessageText:"更新成功"})}function v(e){return r.d.request({url:`${s}`,method:"post",data:e},{successMessageText:"增加成功"})}var h=t(18761),f=t(88350),g=t(37683),y=t(92799),k=t(60841);const _={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},x=(0,n._)("path",{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6C64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9c-27-3.4-52.5-15.2-72.1-34.5c-24-23.5-37.2-55.1-37.2-88.6c0-28 9.1-54.4 26.2-76.4c16.7-21.4 40.2-36.9 66.1-43.7l37.9-10l13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5c14.9-19.2 32.6-36 52.4-50c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50c15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6l37.8 10c54.2 14.4 92.1 63.7 92.1 120c0 33.6-13.2 65.1-37.2 88.6c-19.5 19.2-44.9 31.1-71.9 34.5c-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8c101.7-9.2 182.5-94 183.2-198.2c.6-93.4-62.7-172.1-148.6-194.9z",fill:"currentColor"},null,-1),C=(0,n._)("path",{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6c25.4-25.5 60-39.8 96-39.8c36.2 0 70.3 14.1 96 39.8c1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 0 0 3 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6c-107.4 0-195 85.1-199.4 191.7c-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6c-1.8 33.5-15.7 64.7-39.5 88.6c-25.4 25.5-60 39.8-96 39.8c-36.2 0-70.3-14.1-96-39.8c-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 0 0-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6c107.4 0 195-85.1 199.4-191.7c.2-4.5-3.4-8.3-8-8.3z",fill:"currentColor"},null,-1),b=[x,C];var W=(0,n.aZ)({name:"CloudSyncOutlined",render:function(e,l){return(0,n.wg)(),(0,n.iD)("svg",_,b)}}),U=t(98978),q=t(5373);const M={name:"WechatMenu"};var z=Object.assign(M,{setup(e){const l=[{label:"网页",value:"view"},{label:"点击",value:"click"},{label:"小程序",value:"miniprogram"}],t={name:{required:!0,trigger:["blur","input"],message:"请输入菜单名称"},roleCode:{required:!0,trigger:["blur","input"],message:"请输入角色编码"}},c=(0,U.R)(),r=(0,a.iH)(null),s=(0,a.iH)(null),_=(0,a.iH)(!1),x=(0,a.iH)([{label:"父菜单",value:0}]),C=(0,a.iH)(""),{hasPermission:b}=(0,q.g)(),M=(0,n.Fl)((()=>b(["wechat_menu_sync"]))),z=(0,n.Fl)((()=>b(["wechat_menu_delete"]))),H=(0,n.Fl)((()=>b(["wechat_menu_add"]))),Z=()=>({parentId:0,name:"",type:"view",url:"",menuKey:"",sort:1}),L=(0,a.qj)(Z()),S=(0,a.qj)({width:150,title:"操作",key:"action",fixed:"right",align:"center",render(e){return(0,n.h)(i.p,{style:"text",showLabel:!1,actions:R(e)})}});function R(e){return e.editable?[{label:"保存",type:"success",icon:g.Z,onClick:V.bind(null,e)},{label:"取消",type:"warning",icon:y.Z,onClick:K.bind(null,e)}]:[{label:"编辑",type:"primary",icon:h.Z,onClick:T.bind(null,e),ifShow:()=>!0,auth:["wechat_menu_update"]},{label:"删除",type:"error",color:"red",icon:f.Z,onClick:j.bind(null,e),ifShow:()=>!0,auth:["wechat_menu_remove"]}]}function T(e){C.value=e.key,e.onEdit?.(!0)}function K(e){C.value="",e.onEdit?.(!1,!1)}async function V(e){const l=await(e.onEdit?.(!1,!0));if(l){C.value="";const{id:l,name:t,url:n,menuKey:a,order:u}=e;await m({id:l,name:t,url:n,menuKey:a,order:u})}}const j=e=>{c.info({title:"提示",content:`您想删除${e.name}`,positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{I()},onNegativeClick:()=>{}})},E=async()=>{const e=await p();return x.value=e.map(((e,l)=>({label:e.name,value:e.id,index:l}))),x.value.unshift({label:"父菜单",value:0}),L.sort=e.length+1,{records:e}};function I(){r.value.reload()}function N(e,l){const{data:t}=r.value.tableElRef,{index:n}=l;L.sort=0===n?t.length+1:t[n].children?.length+1}const O=async()=>{await v(L),_.value=!1,Object.assign(L,Z()),I()},D=async()=>{c.info({title:"提示",content:"您确定上传菜单吗，是否继续？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await d()},onNegativeClick:()=>{}})},B=async()=>{c.warning({title:"提示",content:"您确定删除菜单吗，是否继续？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await w()},onNegativeClick:()=>{}})};return(e,c)=>{const d=(0,n.up)("n-icon"),w=(0,n.up)("n-button"),p=(0,n.up)("n-space"),m=(0,n.up)("n-select"),v=(0,n.up)("n-form-item"),h=(0,n.up)("n-input"),g=(0,n.up)("n-input-number"),y=(0,n.up)("n-form"),C=(0,n.up)("n-modal"),b=(0,n.up)("n-card");return(0,n.wg)(),(0,n.j4)(b,{bordered:!1,class:"proCard table"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,a.SU)(i.M),{columns:(0,a.SU)(o),request:E,"row-key":e=>e.id,ref_key:"actionRef",ref:r,actionColumn:S,"scroll-x":1e3,pagination:!1},{tableTitle:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,a.SU)(H)?((0,n.wg)(),(0,n.j4)(w,{key:0,strong:"",secondary:"",type:"primary",onClick:c[0]||(c[0]=()=>_.value=!0)},{icon:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,a.SU)(k.Z))])),_:1})])),default:(0,n.w5)((()=>[(0,n.Uk)(" 新增菜单 ")])),_:1})):(0,n.kq)("",!0),(0,a.SU)(M)?((0,n.wg)(),(0,n.j4)(w,{key:1,strong:"",secondary:"",type:"success",onClick:D},{icon:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,a.SU)(W))])),_:1})])),default:(0,n.w5)((()=>[(0,n.Uk)(" 同步菜单 ")])),_:1})):(0,n.kq)("",!0),(0,a.SU)(z)?((0,n.wg)(),(0,n.j4)(w,{key:2,strong:"",secondary:"",type:"error",onClick:B},{icon:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,a.SU)(f.Z))])),_:1})])),default:(0,n.w5)((()=>[(0,n.Uk)(" 删除菜单 ")])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["columns","row-key","actionColumn"]),(0,a.SU)(H)?((0,n.wg)(),(0,n.j4)(C,{key:0,show:_.value,"onUpdate:show":c[8]||(c[8]=e=>_.value=e),"show-icon":!1,preset:"dialog",title:"新建"},{action:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{onClick:c[7]||(c[7]=()=>_.value=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(w,{type:"info",onClick:O},{default:(0,n.w5)((()=>[(0,n.Uk)("确定")])),_:1})])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(y,{model:L,rules:t,ref_key:"formRef",ref:s,"label-placement":"left","label-width":80,class:"py-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"父级菜单",path:"parentId"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{placeholder:"请选择父级菜单",value:L.parentId,"onUpdate:value":[c[1]||(c[1]=e=>L.parentId=e),N],options:x.value},null,8,["value","options"])])),_:1}),(0,n.Wm)(v,{label:"菜单名称",path:"name"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{placeholder:"请输入菜单名称",value:L.name,"onUpdate:value":c[2]||(c[2]=e=>L.name=e)},null,8,["value"])])),_:1}),(0,n.Wm)(v,{label:"菜单类型",path:"type"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{placeholder:"请选择菜单类型",value:L.type,"onUpdate:value":c[3]||(c[3]=e=>L.type=e),options:l},null,8,["value"])])),_:1}),(0,n.Wm)(v,{label:"菜单URL",path:"url"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{placeholder:"请输入菜单URL",value:L.url,"onUpdate:value":c[4]||(c[4]=e=>L.url=e)},null,8,["value"])])),_:1}),(0,n.wy)((0,n.Wm)(v,{label:"菜单KEY",path:"menuKey"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{placeholder:"请输入菜单KEY",value:L.menuKey,"onUpdate:value":c[5]||(c[5]=e=>L.menuKey=e)},null,8,["value"])])),_:1},512),[[u.F8,"click"===L.type]]),(0,n.Wm)(v,{label:"排序号",path:"sort"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{placeholder:"排序号",value:L.sort,"onUpdate:value":c[6]||(c[6]=e=>L.sort=e)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["show"])):(0,n.kq)("",!0)])),_:1})}}});const H=z;var Z=H}}]);
//# sourceMappingURL=594.234b24d9.js.map