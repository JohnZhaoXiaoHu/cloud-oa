{"version":3,"file":"js/515.931fbec3.js","mappings":"8SAGA,MAAMA,EAAS,iCAKR,SAASC,GAAoB,KAAEC,EAAI,SAAEC,IAC1C,OAAOC,EAAAA,EAAAA,QAAa,CAClBC,IAAM,GAAEL,KAAUE,KAAQC,IAC1BG,OAAQ,OAEZ,CAeO,SAASC,EAAmBC,GACjC,OAAOJ,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,IACRM,OAAQ,OACRE,QAEF,CACEC,mBAAoB,QAG1B,CAqBO,SAASC,EAAsBC,GACpC,OAAOP,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,KAAUW,IAClBL,OAAQ,UAEV,CACEG,mBAAoB,QAG1B,CAKO,SAASG,EAAuBC,EAAUC,GAC/C,OAAOV,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,eACRM,OAAQ,OACRS,OAAQF,EACRG,QAAS,CAAE,eAAgBC,EAAAA,GAAAA,YAE7BH,EACA,CACEL,mBAAoB,QAG1B,CAIO,SAASS,EAAwBC,GACtC,OAAOf,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,eACRM,OAAQ,SACRE,KAAM,CACJW,aAGJ,CACEV,mBAAoB,WAG1B,CAKO,SAASW,EAAuBT,GACrC,OAAOP,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,aAAkBW,IAC1BL,OAAQ,OAEV,CACEG,mBAAoB,QAG1B,C,+ICtHA,MAAMT,EAAS,6BAKR,SAASqB,IACd,OAAOjB,EAAAA,EAAAA,QAAa,CAClBC,IAAM,GAAEL,IACRM,OAAQ,OAEZ,CAKO,SAASgB,GAAgB,KAAEpB,EAAI,SAAEC,IACtC,OAAOC,EAAAA,EAAAA,QAAa,CAClBC,IAAM,GAAEL,KAAUE,KAAQC,IAC1BG,OAAQ,OAEZ,CA+BO,SAASiB,EAAkBf,GAChC,OAAOJ,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,IACRM,OAAQ,MACRE,QAEF,CACEC,mBAAoB,QAG1B,CAKO,SAASe,EAAkBb,GAChC,OAAOP,EAAAA,EAAAA,QACL,CACEC,IAAM,GAAEL,KAAUW,IAClBL,OAAQ,UAEV,CACEG,mBAAoB,QAG1B,C,iHCnCSgB,MAAA,wB,yLA3CPC,EAAAA,EAAAA,IAiDSC,EAAA,CAhDN,cAAa,GACbC,MAAOC,EAAAC,UACPC,MAAOF,EAAAE,MACR,kBAAgB,OAChBC,IAAI,UACJP,MAAA,0C,mBAEA,IAQc,EARdQ,EAAAA,EAAAA,IAQcC,EAAA,CARDC,MAAM,OAAOC,KAAK,iB,mBAC7B,IAME,EANFH,EAAAA,EAAAA,IAMEI,EAAA,CALQC,MAAOT,EAAAC,UAAUS,c,gCAAVV,EAAAC,UAAUS,cAAaC,GACtCC,YAAY,UACXC,QAASb,EAAAc,YACVC,UAAA,GACAnB,MAAA,iB,sCAGJQ,EAAAA,EAAAA,IAWcC,EAAA,CAXDC,MAAM,OAAOC,KAAK,W,mBAC7B,IASE,EATFH,EAAAA,EAAAA,IASEI,EAAA,CARQC,MAAOT,EAAAC,UAAUe,Q,gCAAVhB,EAAAC,UAAUe,QAAOL,GAChCC,YAAY,UACXC,QAASb,EAAAiB,YACT,eAAcjB,EAAAkB,YACd,aAAYlB,EAAAmB,sBACbJ,UAAA,GACAK,OAAA,GACAxB,MAAA,iB,kEAGJQ,EAAAA,EAAAA,IAEcC,EAAA,CAFDC,MAAM,OAAOC,KAAK,Q,mBAC7B,IAAgE,EAAhEH,EAAAA,EAAAA,IAAgEiB,EAAA,CAA/CZ,MAAOT,EAAAC,UAAUqB,K,gCAAVtB,EAAAC,UAAUqB,KAAIX,GAAEC,YAAY,W,4BAEtDR,EAAAA,EAAAA,IAUcC,EAAA,CAVDC,MAAM,KAAKC,KAAK,e,mBAC3B,IAQE,EARFH,EAAAA,EAAAA,IAQEiB,EAAA,CAPQZ,MAAOT,EAAAC,UAAUsB,Y,gCAAVvB,EAAAC,UAAUsB,YAAWZ,GACpCC,YAAY,KACZY,KAAK,WACJC,SAAU,C,kDAMfC,EAAAA,EAAAA,GAKM,MALNC,EAKM,EAJJvB,EAAAA,EAAAA,IAGUwB,EAAA,M,kBAFR,IAA0D,EAA1DxB,EAAAA,EAAAA,IAA0DyB,EAAA,CAAhDL,KAAK,UAAUM,MAAA,GAAOC,QAAO/B,EAAAgC,M,mBAAM,IAAE,UAAF,S,qBAC7C5B,EAAAA,EAAAA,IAA2DyB,EAAA,CAAjDL,KAAK,UAAWO,QAAO/B,EAAAiC,Y,mBAAY,IAAG,UAAH,U,sFC5C9C,MAAMd,EAAwBA,EAAGe,aAC/BC,EAAAA,EAAAA,GACL,MACA,CACEvC,MAAO,CACLwC,QAAS,OACTC,WAAY,WAGhB,EACEF,EAAAA,EAAAA,GAAEG,EAAAA,EAAS,CACTC,IAAKL,EAAOzB,MACZ+B,KAAM,OAMDtB,EAAegB,IACnBC,EAAAA,EAAAA,GACL,MACA,CACEvC,MAAO,CACLwC,QAAS,OACTC,WAAY,WAGhB,EACEF,EAAAA,EAAAA,GAAEG,EAAAA,EAAS,CACTC,IAAKL,EAAOzB,MACZ+B,KAAM,YAMDC,EAAQ,CACnB,CACEnC,MAAO,KACPG,MAAO,qEAET,CACEH,MAAO,OACPG,MACE,+FAEJ,CACEH,MAAO,OACPG,MAAO,qEAET,CACEH,MAAO,OACPG,MAAO,qEAET,CACEH,MAAO,OACPG,MAAO,qEAET,CACEH,MAAO,KACPG,MAAO,qEAET,CACEH,MAAO,KACPG,MAAO,qEAET,CACEH,MAAO,KACPG,MAAO,qEAET,CACEH,MAAO,KACPG,MAAO,sEDlBLP,EAAQ,CACZQ,cAAe,CACbc,KAAM,SACNkB,UAAU,EACVC,QAAS,CAAC,OAAQ,UAClBC,QAAS,WAEXtB,KAAM,CACJoB,UAAU,EACVC,QAAS,CAAC,OAAQ,SAClBC,QAAS,WAEXrB,YAAa,CACXoB,QAAS,CAAC,OAAQ,SAClBC,QAAS,cACTC,UAAWA,KAAK,CAAEpC,KACTA,GAAOqC,OAAS,MAK7B,OAAeC,EAAAA,EAAAA,IAAgB,CAC7BzB,KAAM,eACN0B,MAAO,CAAC,WAAY,SAAU,QAC9BC,MAAO,CACLhD,UAAW,CAACiD,QACZpC,YAAa,CAACqC,QAEhBC,MAAMH,GAAO,KAAEI,IACb,MAAMT,GAAUU,EAAAA,EAAAA,KACVC,GAAUpD,EAAAA,EAAAA,MACVc,GAAcd,EAAAA,EAAAA,IAAIsC,GAExB,SAAST,IACPqB,EAAK,OACP,CAEA,SAASpB,EAAWuB,GAClBA,EAAEC,iBACFF,EAAQ9C,OAAOiD,UAAUC,IAClBA,GAGHC,QAAQC,IAAIF,GACZf,EAAQkB,MAAM,kBAHdT,EAAK,WAIP,GAEJ,CAEA,MAAO,CACLnD,QACAqD,UACAtC,cACAe,OACAC,aACAf,YAAW,EACXC,sBAAqBA,EAEzB,I,WE9GF,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,Q,iCCPA,MAAMC,EAAK,CACPzC,KAAK0C,EAAK1C,GACN,OAAO0B,OAAOiB,UAAUC,SAASC,KAAKH,KAAS,WAAa1C,EAAO,GACvE,EACA8C,MAAMC,GACF,YAAaC,IAAND,GAAyB,OAANA,CAC9B,EACAE,QAAQP,GACJ,MAAsB,kBAARA,GAA4B,OAARA,GAAiC,IAAjBA,EAAIQ,WAAmBT,EAAGf,OAAOgB,EACvF,EACAS,UAAUhG,GACN,OAAOwE,MAAMyB,QAAQjG,IAASA,EAAKmE,OAAS,CAChD,EACA+B,SAASN,GACL,MAAM/C,EAAOsD,KAAKC,QAAQR,GAC1B,MAAgB,aAAT/C,GAAgC,kBAATA,CAClC,EACAuD,QAAQR,GACJ,MAAMS,EAAM9B,OAAOiB,UAAUC,SAASC,KAAKE,GAC3C,MAAO,oBAAoBU,KAAKD,GAAK,EACzC,EACAE,MAAMzE,GACF,YAAc+D,IAAV/D,GAAiC,OAAVA,OAIvB0C,MAAMyB,QAAQnE,KAAU0C,MAAMyB,QAAQnE,IAAWA,EAAMqC,SAInC,kBAAVrC,IAAuBA,EACzC,GAGJ,CAAC,OAAQ,SAAU,SAAU,UAAW,QAAS,UAAU0E,SAAQC,IAC/DnB,EAAGmB,GAAK,SAAUlB,GACd,OAAOD,EAAGzC,KAAK0C,EAAKkB,EACxB,CAAC,IAOL,Q,wBChCAC,EAAe,CACb/D,KAAM,c,iHAeFgE,GAAWnF,EAAAA,EAAAA,IAAI,MACfoF,GAASC,EAAAA,EAAAA,KASf,SAASC,IACP,MAAM,UAAEC,EAAS,YAAEC,GAAgB1C,EAAMxC,MACnCmF,EAAMC,KAAKC,MAAMH,GACvBL,EAAS7E,OAAOsF,QAAQC,EAAAA,EAAAA,UAAqBN,KACzCzB,EAAAA,OAAU2B,IAASA,GAGvBN,EAAS7E,OAAOwF,UAAUL,EAC5B,CACA,SAASM,IACP7C,EAAK,WACP,CAEA,SAAS8C,IACP,MAAMC,EAAM,CACVV,UAAWM,EAAAA,EAAAA,OAAkBV,GAAU7E,MAAM4F,WAC7CV,YAAaE,KAAKS,UAAUhB,EAAS7E,MAAM8F,cAE7ClD,EAAK,SAAU+C,GACf/C,EAAK,WACP,CAEA,SAASpB,IACP,MAAMuE,EAAOR,EAAAA,EAAAA,OAAkBV,GAAU7E,MAAM4F,WAC3C,OAASG,EACXjB,EAAOkB,QAAQ,CACbC,MAAO,KACPC,QAAS,sBACTC,aAAc,KACdC,aAAc,MACdC,cAAc,EACdC,gBAAiBA,KACfZ,GAAQ,IAIZA,GAEJ,C,OA7CAa,EAAAA,EAAAA,KACE,IAAM1B,EAAS7E,QACf,KACEgF,GAAU,I,2bC5Bd,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,QCPA,MAAM9D,EAAa,CACjBsF,MAAO,6BACP,cAAe,+BACfC,QAAS,eAELC,GAA2BzF,EAAAA,EAAAA,GAC/B,OACA,CACE0F,EAAG,sEACHC,KAAM,OACNC,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,MAElB,MACC,GAGGC,GAA2B7F,EAAAA,EAAAA,GAC/B,OACA,CACE8F,EAAG,KACHC,EAAG,KACHC,MAAO,MACPC,OAAQ,KACRC,GAAI,KACJC,GAAI,KACJR,KAAM,OACNC,OAAQ,eACR,kBAAmB,QACnB,eAAgB,MAElB,MACC,GAGGQ,GAA2BpG,EAAAA,EAAAA,GAC/B,OACA,CACE2F,KAAM,OACNC,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,KAChBF,EAAG,0BAEL,MACC,GAGGW,GAA2BrG,EAAAA,EAAAA,GAC/B,OACA,CACE2F,KAAM,OACNC,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,KAChBF,EAAG,mBAEL,MACC,GAGGY,EAAa,CAACb,EAAYI,EAAYO,EAAYC,GACxD,OAAehF,EAAAA,EAAAA,IAAgB,CAC7BzB,KAAM,iBACN0C,OAAQ,SAAgBhE,EAAMiI,GAC5B,OAAOC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOxG,EAAYqG,EAC9D,I,+QCnBIpF,GAAUU,EAAAA,EAAAA,MACV,MAAE8E,EAAK,MAAE3H,IAAU4H,EAAAA,EAAAA,IAAOpF,GAC1BqF,GAAWnI,EAAAA,EAAAA,IAAIiI,EAAM3H,OAE3B8H,eAAeC,EAAa7J,GAC1B,MAAK,SAAS8J,KAAK9J,EAAK+J,KAAKA,MAAMpH,MAIL,IAA1BgH,EAAS7H,MAAMqC,SACjBF,EAAQkB,MAAM,aACP,IALPlB,EAAQkB,MAAM,yBACP,EAOX,CAEA,SAASoC,IACP7C,EAAK,WACP,CAEA,SAASpB,IACHxB,EAAMA,MAAMkI,uBAAyBlI,EAAMA,MAAMmI,qBACnDvF,EAAK,UAELT,EAAQ6D,QAAQ,YAEpB,CAEA,SAASoC,EAAQlK,GACf0E,EAAK,eAAgBiF,GACrBjF,EAAK,eAAgB1E,EACvB,CAEA,MAAMmK,EAAgBA,EAAGJ,OAAMK,WAAUC,aAAYC,cACnD,MAAMjK,EAAW,IAAIkK,SACrBlK,EAASmK,OAAO,OAAQT,EAAKA,OAC7B3J,EAAAA,EAAAA,IAAuBC,EAAU,CAC/BoK,iBAAkBA,EAAGC,cACnBL,EAAW,CAAEK,QAASC,KAAKC,KAAKF,IAAW,IAG5CG,MAAMpD,IACLyC,EAAQzC,GACR2C,GAAU,IAEXU,OAAM,KACLR,GAAS,GACT,EAEN,SAASS,GAAa,KAAEhB,IAItB,OAAOA,CACT,CAGAH,eAAeoB,IACb,MAAMrK,EAAWmB,EAAMA,MAAMkI,4BACvBtJ,EAAAA,EAAAA,IAAwBC,GAC9B,MAAM8G,EAAM,CACVwC,qBAAsB,KACtBD,sBAAuB,MAEzBL,EAAS7H,MAAQ,GACjBoI,EAAQzC,EACV,C,miCChHA,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,mJC8BAf,EAAe,CACb/D,KAAM,c,gCAaR,MAAMsI,GAASC,EAAAA,EAAAA,MACTC,GAAa3J,EAAAA,EAAAA,IAAI,GACjB4J,GAAgB5J,EAAAA,EAAAA,IAAI,WACpBW,GAAcX,EAAAA,EAAAA,IAAI,IAClBmI,GAAWnI,EAAAA,EAAAA,IAAI,IACf6J,GAAYC,EAAAA,EAAAA,IAAS,CACzBvJ,cAAe,KACfY,KAAM,GACNN,QAAS,KACTO,YAAa,KAET2I,GAAYD,EAAAA,EAAAA,IAAS,CACzBvE,UAAW,KACXC,YAAa,OAGTwE,GAAYF,EAAAA,EAAAA,IAAS,CACzBtB,sBAAuB,GACvBC,qBAAsB,KAGxB,SAASwB,EAAgBzL,GACvBuE,OAAOmH,OAAOH,EAAWvL,EAC3B,CAEA,SAAS2L,EAAgB3L,GACvBuE,OAAOmH,OAAOF,EAAWxL,EAC3B,CAEA,SAAS4L,IACHT,EAAWrJ,MAAQ,IACrBqJ,EAAWrJ,OAAS,EAExB,CAEA,SAASyF,IACH4D,EAAWrJ,MAAQ,IACrBqJ,EAAWrJ,OAAS,EAExB,CAEA,SAASuB,IACP4H,EAAOY,KAAK,uBACd,CAEA,SAASC,IACP,MAAMC,EAAkB,IAAKV,KAAcE,KAAcC,IACzDzL,EAAAA,EAAAA,IAAmBgM,GAChBlB,MAAK,KACJxH,GAAM,IAEPyH,OAAOkB,IACN/G,QAAQC,IAAI8G,EAAI,GAEtB,CAEApC,eAAeqC,IACb,MAAMC,QAAcrL,EAAAA,EAAAA,MAChBqL,GAASA,EAAM/H,OAAS,IAC1BhC,EAAYL,MAAQoK,EAAMC,KAAKC,IACtB,CAAEzK,MAAOyK,EAAKzJ,KAAMb,MAAOsK,EAAKjM,OAG7C,C,OAEAkM,EAAAA,EAAAA,KAAU,KAERJ,GAAkB,I,o+BCjHpB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://guigu-oa-admin/./src/api/process/processTemplate.js","webpack://guigu-oa-admin/./src/api/process/processType.js","webpack://guigu-oa-admin/./src/views/process/set/Step1.vue","webpack://guigu-oa-admin/./src/views/process/set/render.js","webpack://guigu-oa-admin/./src/views/process/set/Step1.vue?6918","webpack://guigu-oa-admin/./node_modules/@form-create/utils/lib/type.js","webpack://guigu-oa-admin/./src/views/process/set/Step2.vue","webpack://guigu-oa-admin/./src/views/process/set/Step2.vue?16c1","webpack://guigu-oa-admin/./node_modules/@vicons/ionicons5/es/ArchiveOutline.js","webpack://guigu-oa-admin/./src/views/process/set/Step3.vue","webpack://guigu-oa-admin/./src/views/process/set/Step3.vue?b490","webpack://guigu-oa-admin/./src/views/process/set/set.vue","webpack://guigu-oa-admin/./src/views/process/set/set.vue?5a1c"],"sourcesContent":["import { http } from '@/utils/http/axios';\nimport { ContentTypeEnum } from '@/enums/httpEnum';\n\nconst prefix = '/admin/process/processTemplate';\n\n/**\n * @description: 获取审批模板列表-分页\n */\nexport function pageProcessTemplate({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/${page}/${pageSize}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 获取审批模板\n */\nexport function getProcessTemplate(id) {\n  return http.request({\n    url: `${prefix}/${id}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 新增审批模板\n */\nexport function addProcessTemplate(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'POST',\n      data,\n    },\n    {\n      successMessageText: '添加成功',\n    }\n  );\n}\n\n/**\n * @description: 更新审批模板\n */\nexport function updateProcessTemplate(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'PUT',\n      data,\n    },\n    {\n      successMessageText: '更改成功',\n    }\n  );\n}\n\n/**\n * @description: 删除审批模板\n */\nexport function removeProcessTemplate(id) {\n  return http.request(\n    {\n      url: `${prefix}/${id}`,\n      method: 'DELETE',\n    },\n    {\n      successMessageText: '删除成功',\n    }\n  );\n}\n\n/**\n * @description: 上传Activiti流程定义文件\n */\nexport function uplodProcessDefinition(formData, opt) {\n  return http.request(\n    {\n      url: `${prefix}/upload/def`,\n      method: 'POST',\n      params: formData,\n      headers: { 'Content-Type': ContentTypeEnum.FORM_DATA },\n    },\n    opt,\n    {\n      successMessageText: '上传成功',\n    }\n  );\n}\n/**\n * @description: 删除Activiti流程定义文件\n */\nexport function deleteProcessDefinition(filename) {\n  return http.request(\n    {\n      url: `${prefix}/delete/def`,\n      method: 'DELETE',\n      data: {\n        filename,\n      },\n    },\n    {\n      successMessageText: '定义文件已删除',\n    }\n  );\n}\n\n/**\n * @description: 发布审批模板\n */\nexport function publishProcessTemplate(id) {\n  return http.request(\n    {\n      url: `${prefix}/publish/${id}`,\n      method: 'GET',\n    },\n    {\n      successMessageText: '发布成功',\n    }\n  );\n}\n","import { http } from '@/utils/http/axios';\n\nconst prefix = '/admin/process/processType';\n\n/**\n * @description: 获取审批类型列表\n */\nexport function listProcessType() {\n  return http.request({\n    url: `${prefix}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 获取审批类型列表-分页\n */\nexport function pageProcessType({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/${page}/${pageSize}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 获取审批类型\n */\nexport function getProcessType(id) {\n  return http.request({\n    url: `${prefix}/${id}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 新增审批类型\n */\nexport function addProcessType(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'POST',\n      data,\n    },\n    {\n      successMessageText: '添加成功',\n    }\n  );\n}\n\n/**\n * @description: 更新审批类型\n */\nexport function updateProcessType(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'PUT',\n      data,\n    },\n    {\n      successMessageText: '更改成功',\n    }\n  );\n}\n\n/**\n * @description: 删除审批类型\n */\nexport function removeProcessType(id) {\n  return http.request(\n    {\n      url: `${prefix}/${id}`,\n      method: 'DELETE',\n    },\n    {\n      successMessageText: '删除成功',\n    }\n  );\n}\n","<template>\n  <n-form\n    :label-width=\"90\"\n    :model=\"formValue\"\n    :rules=\"rules\"\n    label-placement=\"left\"\n    ref=\"formRef\"\n    style=\"max-width: 500px; margin: 40px auto\"\n  >\n    <n-form-item label=\"审批类型\" path=\"processTypeId\">\n      <n-select\n        v-model:value=\"formValue.processTypeId\"\n        placeholder=\"请选择审批类型\"\n        :options=\"typeOptions\"\n        clearable\n        style=\"width: 300px\"\n      />\n    </n-form-item>\n    <n-form-item label=\"审批图标\" path=\"iconUrl\">\n      <n-select\n        v-model:value=\"formValue.iconUrl\"\n        placeholder=\"请选择审批图标\"\n        :options=\"iconOptions\"\n        :render-label=\"renderLabel\"\n        :render-tag=\"renderSingleSelectTag\"\n        clearable\n        remote\n        style=\"width: 300px\"\n      />\n    </n-form-item>\n    <n-form-item label=\"审批名称\" path=\"name\">\n      <n-input v-model:value=\"formValue.name\" placeholder=\"请输入审批名称\" />\n    </n-form-item>\n    <n-form-item label=\"描述\" path=\"description\">\n      <n-input\n        v-model:value=\"formValue.description\"\n        placeholder=\"描述\"\n        type=\"textarea\"\n        :autosize=\"{\n          minRows: 3,\n          maxRows: 5,\n        }\"\n      />\n    </n-form-item>\n    <div style=\"margin-left: 90px\">\n      <n-space>\n        <n-button type=\"default\" ghost @click=\"back\">返回</n-button>\n        <n-button type=\"primary\" @click=\"formSubmit\">下一步</n-button>\n      </n-space>\n    </div>\n  </n-form>\n</template>\n<script>\nimport { useMessage } from 'naive-ui';\nimport { defineComponent, ref } from 'vue';\n\nimport { renderLabel, renderSingleSelectTag, icons } from './render';\nconst rules = {\n  processTypeId: {\n    type: 'number',\n    required: true,\n    trigger: ['blur', 'change'],\n    message: '请选择审批类型',\n  },\n  name: {\n    required: true,\n    trigger: ['blur', 'input'],\n    message: '请输入审批名称',\n  },\n  description: {\n    trigger: ['blur', 'input'],\n    message: '最大长度不能超过255',\n    validator: (...[, value]) => {\n      return value?.length < 255;\n    },\n  },\n};\n\nexport default defineComponent({\n  name: 'BasicSetting',\n  emits: ['nextStep', 'update', 'back'],\n  props: {\n    formValue: [Object],\n    typeOptions: [Array],\n  },\n  setup(props, { emit }) {\n    const message = useMessage();\n    const formRef = ref();\n    const iconOptions = ref(icons);\n\n    function back() {\n      emit('back');\n    }\n\n    function formSubmit(e) {\n      e.preventDefault();\n      formRef.value?.validate((errors) => {\n        if (!errors) {\n          emit('nextStep');\n        } else {\n          console.log(errors);\n          message.error('验证失败，请完整填写信息!');\n        }\n      });\n    }\n\n    return {\n      rules,\n      formRef,\n      iconOptions,\n      back,\n      formSubmit,\n      renderLabel,\n      renderSingleSelectTag,\n    };\n  },\n});\n</script>\n<style scoped></style>\n","import { NAvatar } from 'naive-ui';\nimport { h } from 'vue';\n\nexport const renderSingleSelectTag = ({ option }) => {\n  return h(\n    'div',\n    {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n      },\n    },\n    [\n      h(NAvatar, {\n        src: option.value,\n        size: 24,\n      }),\n    ]\n  );\n};\n\nexport const renderLabel = (option) => {\n  return h(\n    'div',\n    {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n      },\n    },\n    [\n      h(NAvatar, {\n        src: option.value,\n        size: 'small',\n      }),\n    ]\n  );\n};\n\nexport const icons = [\n  {\n    label: '出差',\n    value: 'https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png',\n  },\n  {\n    label: '合同审批',\n    value:\n      'https://gw.alicdn.com/imgextra/i3/O1CN01LLn0YV1LhBXs7T2iO_!!6000000001330-2-tps-120-120.png',\n  },\n  {\n    label: '合同借阅',\n    value: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png',\n  },\n  {\n    label: '机票出差',\n    value: 'https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png',\n  },\n  {\n    label: '补卡申请',\n    value: 'https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png',\n  },\n  {\n    label: '加班',\n    value: 'https://gw.alicdn.com/tfs/TB1Y8PlCNjaK1RjSZKzXXXVwXXa-112-112.png',\n  },\n  {\n    label: '请假',\n    value: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png',\n  },\n  {\n    label: '调岗',\n    value: 'https://gw.alicdn.com/tfs/TB13ca1CMDqK1RjSZSyXXaxEVXa-102-102.png',\n  },\n  {\n    label: '离职',\n    value: 'https://gw.alicdn.com/tfs/TB1U9iBCSzqK1RjSZPcXXbTepXa-102-102.png',\n  },\n];\n","import { render } from \"./Step1.vue?vue&type=template&id=7189c062\"\nimport script from \"./Step1.vue?vue&type=script&lang=js\"\nexport * from \"./Step1.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/swcode/Documents/VS-Code/guigu-oa/guigu-oa-admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","const is = {\n    type(arg, type) {\n        return Object.prototype.toString.call(arg) === '[object ' + type + ']'\n    },\n    Undef(v) {\n        return v === undefined || v === null\n    },\n    Element(arg) {\n        return typeof arg === 'object' && arg !== null && arg.nodeType === 1 && !is.Object(arg)\n    },\n    trueArray(data) {\n        return Array.isArray(data) && data.length > 0;\n    },\n    Function(v) {\n        const type = this.getType(v);\n        return type === 'Function' || type === 'AsyncFunction';\n    },\n    getType(v) {\n        const str = Object.prototype.toString.call(v)\n        return /^\\[object (.*)\\]$/.exec(str)[1]\n    },\n    empty(value) {\n        if (value === undefined || value === null) {\n            return true;\n        }\n\n        if (Array.isArray(value) && Array.isArray(value) && !value.length) {\n            return true;\n        }\n\n        return typeof value === 'string' && !value;\n    }\n};\n\n['Date', 'Object', 'String', 'Boolean', 'Array', 'Number'].forEach(t => {\n    is[t] = function (arg) {\n        return is.type(arg, t);\n    }\n})\n\nexport function hasProperty(rule, k) {\n    return ({}).hasOwnProperty.call(rule, k)\n}\n\nexport default is;\n","<template>\n  <div>\n    <div class=\"tools\">\n      <n-space>\n        <n-button type=\"primary\" @click=\"formSubmit\">提交</n-button>\n        <n-button type=\"default\" ghost @click=\"prevStep\">上一步</n-button>\n      </n-space>\n    </div>\n    <fc-designer ref=\"designer\" style=\"min-height: 600px\" />\n  </div>\n</template>\n<script>\nexport default {\n  name: 'FormCreate',\n};\n</script>\n<script setup>\nimport { ref, defineEmits, defineProps, watch } from 'vue';\nimport FcDesigner from 'form-designer-naiveui';\nimport formCreate from '@form-create/naive-ui';\nimport { useDialog } from 'naive-ui';\nimport is from '@form-create/utils/lib/type';\n\nconst emit = defineEmits(['nextStep', 'prevStep', 'update']);\nconst props = defineProps({\n  value: [Object],\n});\n\nconst designer = ref(null);\nconst dialog = useDialog();\n\nwatch(\n  () => designer.value,\n  () => {\n    loadData();\n  }\n);\n\nfunction loadData() {\n  const { formProps, formOptions } = props.value;\n  const val = JSON.parse(formOptions);\n  designer.value?.setRule(formCreate.parseJson(formProps));\n  if (is.Object(val) || !val) {\n    return;\n  }\n  designer.value?.setOption(val);\n}\nfunction prevStep() {\n  emit('prevStep');\n}\n\nfunction submit() {\n  const res = {\n    formProps: formCreate.toJson(designer?.value.getRule()),\n    formOptions: JSON.stringify(designer.value.getOption()),\n  };\n  emit('update', res);\n  emit('nextStep');\n}\n\nfunction formSubmit() {\n  const rule = formCreate.toJson(designer?.value.getRule());\n  if ('[]' === rule) {\n    dialog.warning({\n      title: '提示',\n      content: '注意到你并未设计表单，您确定继续提交？',\n      positiveText: '确定',\n      negativeText: '不确定',\n      maskClosable: false,\n      onPositiveClick: () => {\n        submit();\n      },\n    });\n  } else {\n    submit();\n  }\n}\n</script>\n<style scoped>\n.tools {\n  width: 100%;\n  padding: 20px 0;\n  display: flex;\n  justify-content: flex-end;\n}\n</style>\n","import script from \"./Step2.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Step2.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Step2.vue?vue&type=style&index=0&id=1b611bd4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/swcode/Documents/VS-Code/guigu-oa/guigu-oa-admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1b611bd4\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'rect',\n  {\n    x: '48',\n    y: '64',\n    width: '416',\n    height: '80',\n    rx: '28',\n    ry: '28',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32',\n    d: 'M320 304l-64 64l-64-64'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_5 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32',\n    d: 'M256 345.89V224'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_6 = [_hoisted_2, _hoisted_3, _hoisted_4, _hoisted_5]\nexport default defineComponent({\n  name: 'ArchiveOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_6)\n  }\n})\n","<template>\n  <div style=\"max-width: 400px; margin: 40px auto\">\n    <n-upload\n      directory-dnd\n      v-model:file-list=\"fileList\"\n      :custom-request=\"customRequest\"\n      @before-upload=\"beforeUpload\"\n      @remove=\"remove\"\n      @finish=\"handleFinish\"\n    >\n      <n-upload-dragger>\n        <div style=\"margin-bottom: 12px\">\n          <n-icon size=\"48\" :depth=\"3\">\n            <archive-icon />\n          </n-icon>\n        </div>\n        <n-text style=\"font-size: 16px\">\n          将Activiti流程设计文件拖到此处，或点击上传\n        </n-text>\n        <n-p depth=\"3\" style=\"margin: 8px 0 0 0\">\n          只能上传zip格式的压缩文件，请重新上传\n        </n-p>\n      </n-upload-dragger>\n    </n-upload>\n    <div class=\"tools\">\n      <n-space>\n        <n-button type=\"primary\" @click=\"formSubmit\">提交</n-button>\n        <n-button type=\"default\" ghost @click=\"prevStep\">上一步</n-button>\n      </n-space>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { defineEmits, defineProps, ref, toRefs } from 'vue';\nimport { ArchiveOutline as ArchiveIcon } from '@vicons/ionicons5';\nimport { useMessage } from 'naive-ui';\nimport {\n  uplodProcessDefinition,\n  deleteProcessDefinition,\n} from '@/api/process/processTemplate';\n\nconst emit = defineEmits([\n  'finish',\n  'prevStep',\n  'update:files',\n  'update-value',\n]);\nconst props = defineProps({\n  value: { type: Object },\n  files: [Array],\n});\n\nconst message = useMessage();\nconst { files, value } = toRefs(props);\nconst fileList = ref(files.value);\n\nasync function beforeUpload(data) {\n  if (!/\\.zip$/.test(data.file.file?.name)) {\n    message.error('只能上传zip格式的压缩文件，请重新上传');\n    return false;\n  }\n  if (fileList.value.length === 1) {\n    message.error('只能上传一个文件');\n    return false;\n  }\n  return true;\n}\n\nfunction prevStep() {\n  emit('prevStep');\n}\n\nfunction formSubmit() {\n  if (value.value.processDefinitionPath && value.value.processDefinitionKey) {\n    emit('finish');\n  } else {\n    message.warning('您并未上传流程文件');\n  }\n}\n\nfunction setData(data) {\n  emit('update:files', fileList);\n  emit('update-value', data);\n}\n\nconst customRequest = ({ file, onFinish, onProgress, onError }) => {\n  const formData = new FormData();\n  formData.append('file', file.file);\n  uplodProcessDefinition(formData, {\n    onUploadProgress: ({ percent }) => {\n      onProgress({ percent: Math.ceil(percent) });\n    },\n  })\n    .then((res) => {\n      setData(res);\n      onFinish();\n    })\n    .catch(() => {\n      onError();\n    });\n};\nfunction handleFinish({ file }) {\n  // 改名\n  // file.name = props.value?.processDefinitionKey + '.zip';\n  // emit('update:file-list', [file]);\n  return file;\n}\n\n// 删除文件\nasync function remove() {\n  const filename = value.value.processDefinitionPath;\n  await deleteProcessDefinition(filename);\n  const res = {\n    processDefinitionKey: null,\n    processDefinitionPath: null,\n  };\n  fileList.value = [];\n  setData(res);\n}\n</script>\n<style scoped>\n.tools {\n  display: flex-end;\n  margin-top: 20px;\n}\n</style>\n","import script from \"./Step3.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Step3.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Step3.vue?vue&type=style&index=0&id=a613584e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/swcode/Documents/VS-Code/guigu-oa/guigu-oa-admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a613584e\"]])\n\nexport default __exports__","<template>\n  <div>\n    <div class=\"n-layout-page-header\"></div>\n    <n-card :bordered=\"false\" class=\"mt-4 proCard\">\n      <n-space vertical class=\"steps\" justify=\"center\">\n        <n-steps :current=\"currentTab\" :status=\"currentStatus\">\n          <n-step title=\"基本设置\" />\n          <n-step title=\"表单设置\" />\n          <n-step title=\"流程设置\" />\n        </n-steps>\n        <step1\n          v-if=\"currentTab === 1\"\n          :formValue=\"step1Data\"\n          :typeOptions=\"typeOptions\"\n          @nextStep=\"nextStep\"\n          @back=\"back\"\n        />\n        <step2\n          v-if=\"currentTab === 2\"\n          :value=\"step2Data\"\n          @nextStep=\"nextStep\"\n          @prevStep=\"prevStep\"\n          @update=\"updateStep2Data\"\n        />\n        <step3\n          v-if=\"currentTab === 3\"\n          v-model:value=\"step3Data\"\n          v-model:files=\"fileList\"\n          @prevStep=\"prevStep\"\n          @finish=\"finish\"\n          @update-value=\"updateStep3Data\"\n        />\n      </n-space>\n    </n-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ProcessSet',\n};\n</script>\n\n<script setup>\nimport { onMounted, reactive, ref } from 'vue';\nimport step1 from './Step1.vue';\nimport step2 from './Step2.vue';\nimport step3 from './Step3.vue';\nimport { listProcessType } from '@/api/process/processType';\nimport { addProcessTemplate } from '@/api/process/processTemplate';\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\nconst currentTab = ref(1);\nconst currentStatus = ref('process');\nconst typeOptions = ref([]);\nconst fileList = ref([]);\nconst step1Data = reactive({\n  processTypeId: null,\n  name: '',\n  iconUrl: null,\n  description: '',\n});\nconst step2Data = reactive({\n  formProps: '[]',\n  formOptions: null,\n});\n\nconst step3Data = reactive({\n  processDefinitionPath: '',\n  processDefinitionKey: '',\n});\n\nfunction updateStep2Data(data) {\n  Object.assign(step2Data, data);\n}\n\nfunction updateStep3Data(data) {\n  Object.assign(step3Data, data);\n}\n\nfunction nextStep() {\n  if (currentTab.value < 3) {\n    currentTab.value += 1;\n  }\n}\n\nfunction prevStep() {\n  if (currentTab.value > 1) {\n    currentTab.value -= 1;\n  }\n}\n\nfunction back() {\n  router.push('/processSet/template');\n}\n\nfunction finish() {\n  const processTemplate = { ...step1Data, ...step2Data, ...step3Data };\n  addProcessTemplate(processTemplate)\n    .then(() => {\n      back();\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\nasync function fetchProcessType() {\n  const types = await listProcessType();\n  if (types && types.length > 0) {\n    typeOptions.value = types.map((item) => {\n      return { label: item.name, value: item.id };\n    });\n  }\n}\n\nonMounted(() => {\n  // 填充类型选项\n  fetchProcessType();\n});\n</script>\n<style lang=\"less\" scoped>\n.steps {\n  width: 100%;\n  margin: 16px auto;\n}\n</style>\n","import script from \"./set.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./set.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./set.vue?vue&type=style&index=0&id=53e5ea67&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/swcode/Documents/VS-Code/guigu-oa/guigu-oa-admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53e5ea67\"]])\n\nexport default __exports__"],"names":["prefix","pageProcessTemplate","page","pageSize","http","url","method","addProcessTemplate","data","successMessageText","removeProcessTemplate","id","uplodProcessDefinition","formData","opt","params","headers","ContentTypeEnum","deleteProcessDefinition","filename","publishProcessTemplate","listProcessType","pageProcessType","updateProcessType","removeProcessType","style","_createBlock","_component_n_form","model","_ctx","formValue","rules","ref","_createVNode","_component_n_form_item","label","path","_component_n_select","value","processTypeId","$event","placeholder","options","typeOptions","clearable","iconUrl","iconOptions","renderLabel","renderSingleSelectTag","remote","_component_n_input","name","description","type","autosize","_createElementVNode","_hoisted_1","_component_n_space","_component_n_button","ghost","onClick","back","formSubmit","option","h","display","alignItems","NAvatar","src","size","icons","required","trigger","message","validator","length","defineComponent","emits","props","Object","Array","setup","emit","useMessage","formRef","e","preventDefault","validate","errors","console","log","error","__exports__","render","is","arg","prototype","toString","call","Undef","v","undefined","Element","nodeType","trueArray","isArray","Function","this","getType","str","exec","empty","forEach","t","__default__","designer","dialog","useDialog","loadData","formProps","formOptions","val","JSON","parse","setRule","formCreate","setOption","prevStep","submit","res","getRule","stringify","getOption","rule","warning","title","content","positiveText","negativeText","maskClosable","onPositiveClick","watch","xmlns","viewBox","_hoisted_2","d","fill","stroke","_hoisted_3","x","y","width","height","rx","ry","_hoisted_4","_hoisted_5","_hoisted_6","_cache","_openBlock","_createElementBlock","files","toRefs","fileList","async","beforeUpload","test","file","processDefinitionPath","processDefinitionKey","setData","customRequest","onFinish","onProgress","onError","FormData","append","onUploadProgress","percent","Math","ceil","then","catch","handleFinish","remove","router","useRouter","currentTab","currentStatus","step1Data","reactive","step2Data","step3Data","updateStep2Data","assign","updateStep3Data","nextStep","push","finish","processTemplate","err","fetchProcessType","types","map","item","onMounted"],"sourceRoot":""}