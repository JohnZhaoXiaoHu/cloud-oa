{"version":3,"file":"js/62.a3df9ad1.js","mappings":"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","sources":["webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/DeleteOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/EditOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/EyeOutlined.js","webpack://guigu-oa-admin/./node_modules/@vicons/antd/es/PlusOutlined.js","webpack://guigu-oa-admin/./src/api/process/processTemplate.js","webpack://guigu-oa-admin/./node_modules/@vicons/ionicons5/es/PaperPlaneOutline.js","webpack://guigu-oa-admin/./src/views/process/template/columns.js","webpack://guigu-oa-admin/./src/views/process/template/template.vue","webpack://guigu-oa-admin/./src/views/process/template/template.vue?82ef"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'DeleteOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'EditOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3c7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176s176-78.8 176-176s-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112s112 50.1 112 112s-50.1 112-112 112z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'EyeOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'defs',\n  null,\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_5 = [_hoisted_2, _hoisted_3, _hoisted_4]\nexport default defineComponent({\n  name: 'PlusOutlined',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_5)\n  }\n})\n","import { http } from '@/utils/http/axios';\nimport { ContentTypeEnum } from '@/enums/httpEnum';\n\nconst prefix = '/admin/process/processTemplate';\n\n/**\n * @description: 获取审批模板列表-分页\n */\nexport function pageProcessTemplate({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/${page}/${pageSize}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 获取审批模板\n */\nexport function getProcessTemplate(id) {\n  return http.request({\n    url: `${prefix}/${id}`,\n    method: 'GET',\n  });\n}\n\n/**\n * @description: 新增审批模板\n */\nexport function addProcessTemplate(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'POST',\n      data,\n    },\n    {\n      successMessageText: '添加成功',\n    }\n  );\n}\n\n/**\n * @description: 更新审批模板\n */\nexport function updateProcessTemplate(data) {\n  return http.request(\n    {\n      url: `${prefix}`,\n      method: 'PUT',\n      data,\n    },\n    {\n      successMessageText: '更改成功',\n    }\n  );\n}\n\n/**\n * @description: 删除审批模板\n */\nexport function removeProcessTemplate(id) {\n  return http.request(\n    {\n      url: `${prefix}/${id}`,\n      method: 'DELETE',\n    },\n    {\n      successMessageText: '删除成功',\n    }\n  );\n}\n\n/**\n * @description: 上传Activiti流程定义文件\n */\nexport function uplodProcessDefinition(formData, opt) {\n  return http.request(\n    {\n      url: `${prefix}/upload/def`,\n      method: 'POST',\n      params: formData,\n      headers: { 'Content-Type': ContentTypeEnum.FORM_DATA },\n    },\n    opt,\n    {\n      successMessageText: '上传成功',\n    }\n  );\n}\n/**\n * @description: 删除Activiti流程定义文件\n */\nexport function deleteProcessDefinition(filename) {\n  return http.request(\n    {\n      url: `${prefix}/delete/def`,\n      method: 'DELETE',\n      data: {\n        filename,\n      },\n    },\n    {\n      successMessageText: '定义文件已删除',\n    }\n  );\n}\n\n/**\n * @description: 发布审批模板\n */\nexport function publishProcessTemplate(id) {\n  return http.request(\n    {\n      url: `${prefix}/publish/${id}`,\n      method: 'GET',\n    },\n    {\n      successMessageText: '发布成功',\n    }\n  );\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M53.12 199.94l400-151.39a8 8 0 0 1 10.33 10.33l-151.39 400a8 8 0 0 1-15-.34l-67.4-166.09a16 16 0 0 0-10.11-10.11L53.46 215a8 8 0 0 1-.34-15.06z',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32',\n    d: 'M460 52L227 285'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'PaperPlaneOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","import { NAvatar } from 'naive-ui';\nimport { h } from 'vue';\n\nexport const createColumns = ({ currentIndex }) => {\n  return [\n    {\n      type: 'selection',\n      key: 'selection',\n    },\n    {\n      title: '序号',\n      key: 'index',\n      width: 60,\n      render: (...[, record]) => {\n        return currentIndex() + record + 1;\n      },\n    },\n    {\n      title: '审批名称',\n      key: 'name',\n      edit: true,\n      editComponent: 'NInput',\n      editRule: true,\n    },\n    {\n      title: '图标',\n      key: 'iconUrl',\n      width: 100,\n      render(row) {\n        return h(NAvatar, {\n          size: 36,\n          src: row.iconUrl,\n        });\n      },\n    },\n    {\n      title: '审批类型',\n      key: 'processTypeName',\n    },\n    {\n      title: '描述',\n      key: 'description',\n      edit: true,\n      editComponent: 'NInput',\n    },\n    {\n      title: '创建时间',\n      key: 'createTime',\n    },\n    {\n      title: '修改时间',\n      key: 'updateTime',\n    },\n  ];\n};\n","<template>\n  <n-card>\n    <BasicTable\n      :columns=\"columns\"\n      :request=\"loadDataTable\"\n      :row-key=\"(row) => row.id\"\n      ref=\"actionRef\"\n      :actionColumn=\"actionColumn\"\n      :scroll-x=\"1000\"\n      :pagination=\"pagination\"\n      @fetch-success=\"fetchSuccess\"\n    >\n      <template #tableTitle>\n        <n-space>\n          <!-- 新增 -->\n          <n-button\n            v-if=\"hasAddPermision\"\n            strong\n            secondary\n            type=\"primary\"\n            @click=\"setProcessTemplate\"\n          >\n            <template #icon>\n              <n-icon>\n                <PlusOutlined />\n              </n-icon>\n            </template>\n            添加\n          </n-button>\n        </n-space>\n      </template>\n    </BasicTable>\n    <n-modal v-model:show=\"formDialogVisible\">\n      <n-card\n        style=\"width: 600px\"\n        title=\"查看审批设置\"\n        preset=\"card\"\n        :bordered=\"false\"\n        size=\"huge\"\n      >\n        <h3>基本信息</h3>\n        <n-divider />\n        <n-form\n          :model=\"templateFormModel\"\n          label-placement=\"left\"\n          :show-feedback=\"false\"\n        >\n          <n-form-item label=\"审批类型\">\n            {{ templateFormModel.processTypeName }}\n          </n-form-item>\n          <n-form-item label=\"名称\"> {{ templateFormModel.name }} </n-form-item>\n          <n-form-item label=\"创建时间\">\n            {{ templateFormModel.createTime }}\n          </n-form-item>\n        </n-form>\n        <h3>表单信息</h3>\n        <n-divider />\n        <div>\n          <FormCreate\n            :rule=\"formCreateData.rule\"\n            :option=\"formCreateData.options\"\n          />\n        </div>\n        <template #footer>\n          <div style=\"display: flex; justify-content: flex-end\">\n            <n-button @click=\"formDialogVisible = false\">确定</n-button>\n          </div>\n        </template>\n      </n-card>\n    </n-modal>\n  </n-card>\n</template>\n<script>\nexport default {\n  name: 'ProcessTemplate',\n};\n</script>\n\n<script setup>\nimport {\n  pageProcessTemplate,\n  removeProcessTemplate,\n  publishProcessTemplate,\n} from '@/api/process/processTemplate';\nimport { usePermission } from '@/hooks/web/usePermission';\nimport { useDialog } from 'naive-ui';\nimport { computed, h, reactive, ref, unref } from 'vue';\nimport {\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  EyeOutlined,\n} from '@vicons/antd';\nimport { PaperPlaneOutline } from '@vicons/ionicons5';\nimport { BasicTable, TableAction } from '@/components/Table';\nimport { createColumns } from './columns';\nimport { useRouter } from 'vue-router';\nimport formCreate from '@form-create/naive-ui';\n\nconst FormCreate = formCreate.$form();\nconst router = useRouter();\nconst dialog = useDialog();\nconst actionRef = ref();\nconst templateFormModel = ref(null);\nconst formDialogVisible = ref(false);\nconst { hasPermission } = usePermission();\nconst currentIndex = ref(1);\nconst pagination = reactive({\n  prefix: (info) => {\n    return `共 ${info.itemCount} 条`;\n  },\n});\nconst columns = createColumns({\n  currentIndex() {\n    return unref(currentIndex);\n  },\n});\n\nconst hasAddPermision = computed(() => {\n  return hasPermission(['process_template_set']);\n});\nconst formCreateData = reactive({\n  rule: null,\n  options: null,\n});\n// 操作列属性\nconst actionColumn = reactive({\n  width: 150,\n  title: '操作',\n  key: 'action',\n  fixed: 'right',\n  align: 'center',\n  render(record) {\n    return h(TableAction, {\n      style: 'text',\n      showLabel: false,\n      actions: createActions(record),\n    });\n  },\n});\n\nfunction createActions(record) {\n  return [\n    {\n      label: '查看',\n      type: 'primary',\n      icon: EyeOutlined,\n      onClick: handleView.bind(null, record),\n      auth: ['process_template_list'],\n    },\n    {\n      label: '编辑',\n      type: 'primary',\n      icon: EditOutlined,\n      onClick: handleEdit.bind(null, record),\n      ifShow: () => {\n        return true;\n      },\n      // 根据权限控制是否显示: 有权限，会显示，支持多个\n      auth: ['process_template_update'],\n    },\n    {\n      label: '发布',\n      type: 'success',\n      icon: PaperPlaneOutline,\n      onClick: handlePublish.bind(null, record),\n      ifShow: () => {\n        return record.status === 0;\n      },\n      auth: ['process_template_publish'],\n    },\n    {\n      label: '删除',\n      type: 'error',\n      // 配置color会覆盖type\n      color: 'red',\n      icon: DeleteOutlined,\n      onClick: handleDelete.bind(null, record),\n      // 根据业务控制是否显示 isShow 和 auth 是并且关系\n      ifShow: () => {\n        return true;\n      },\n      // 根据权限控制是否显示: 有权限，会显示，支持多个\n      auth: ['process_template_remove'],\n    },\n  ];\n}\n\n// 跳转到模板添加页面\nfunction setProcessTemplate() {\n  router.push('/processSet/set');\n}\n\n/**\n * 表格处理事件\n */\n// 刷新表格\nfunction reloadTable() {\n  actionRef.value.reload();\n}\nfunction fetchSuccess() {\n  currentIndex.value =\n    (actionRef.value.pagination.page - 1) * actionRef.value.pagination.pageSize;\n}\n// 加载表格数据\nconst loadDataTable = async (res) => {\n  return await pageProcessTemplate({ ...res });\n};\n// 查看点击事件\nfunction handleView(record) {\n  formCreateData.rule = JSON.parse(record.formProps);\n  formCreateData.options = JSON.parse(record.formOptions);\n  templateFormModel.value = record;\n  formDialogVisible.value = true;\n}\n// 编辑点击事件\nfunction handleEdit() {}\n// 发布点击事件\nasync function handlePublish(record) {\n  await publishProcessTemplate(record.id);\n  reloadTable();\n}\n// 单行删除\nfunction handleDelete(record) {\n  dialog.info({\n    title: '提示',\n    content: `您想删除${record.name}`,\n    positiveText: '确定',\n    negativeText: '取消',\n    onPositiveClick: async () => {\n      await removeProcessTemplate(record.id);\n      reloadTable();\n    },\n    onNegativeClick: () => {},\n  });\n}\n</script>\n","import script from \"./template.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./template.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","xmlns","viewBox","_hoisted_2","_createElementVNode","d","fill","_hoisted_3","defineComponent","name","render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_4","_hoisted_5","prefix","pageProcessTemplate","page","pageSize","http","url","method","addProcessTemplate","data","successMessageText","removeProcessTemplate","id","uplodProcessDefinition","formData","opt","params","headers","ContentTypeEnum","deleteProcessDefinition","filename","publishProcessTemplate","stroke","createColumns","currentIndex","type","key","title","width","record","edit","editComponent","editRule","row","h","NAvatar","size","src","iconUrl","__default__","FormCreate","formCreate","router","useRouter","dialog","useDialog","actionRef","ref","templateFormModel","formDialogVisible","hasPermission","usePermission","pagination","reactive","info","itemCount","columns","unref","hasAddPermision","computed","formCreateData","rule","options","actionColumn","fixed","align","TableAction","style","showLabel","actions","createActions","label","icon","EyeOutlined","onClick","handleView","bind","auth","EditOutlined","handleEdit","ifShow","PaperPlaneOutline","handlePublish","status","color","DeleteOutlined","handleDelete","setProcessTemplate","push","reloadTable","value","reload","fetchSuccess","loadDataTable","async","res","JSON","parse","formProps","formOptions","content","positiveText","negativeText","onPositiveClick","onNegativeClick","__exports__"],"sourceRoot":""}