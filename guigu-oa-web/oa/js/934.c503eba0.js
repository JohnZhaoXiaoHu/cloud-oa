"use strict";(self["webpackChunkguigu_oa_web"]=self["webpackChunkguigu_oa_web"]||[]).push([[934],{3094:function(){},921:function(e,t,n){n.d(t,{$k:function(){return o},Rk:function(){return u},U4:function(){return r},Xm:function(){return d},Yt:function(){return l},jb:function(){return c},k_:function(){return f},oZ:function(){return s}});var a=n(4170);const i="/web/process";function l(){return a.d.request({url:`${i}/list`,method:"get"})}function o(e){return a.d.request({url:`${i}/template/${e}`,method:"get"})}function r(e){return a.d.request({url:`${i}/startUp`,method:"post",data:e})}function s({page:e,pageSize:t}){return a.d.request({url:`${i}/pending/${e}/${t}`,method:"get"})}function u({page:e,pageSize:t}){return a.d.request({url:`${i}/processed/${e}/${t}`,method:"get"})}function c({page:e,pageSize:t}){return a.d.request({url:`${i}/started/${e}/${t}`,method:"get"})}function d(e){return a.d.request({url:`${i}/show/${e}`,method:"get"})}function f(e){return a.d.request({url:`${i}/approve`,method:"post",data:e})}},8934:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(1404),i=(n(7658),n(3396)),l=n(4870),o=n(610),r=n(5323),s=n(7936),u=n(253),c=n(5261),d=n(2229);const[f,g,p]=(0,o["do"])("pull-refresh"),v=50,m=["pulling","loosing","success"],h={disabled:Boolean,modelValue:Boolean,headHeight:(0,r.SI)(v),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:r.Or,successDuration:(0,r.SI)(500),animationDuration:(0,r.SI)(300)};var b=(0,i.aZ)({name:f,props:h,emits:["change","refresh","update:modelValue"],setup(e,{emit:t,slots:n}){let a;const o=(0,l.iH)(),r=(0,l.iH)(),f=(0,u.eo)(o),h=(0,l.qj)({status:"normal",distance:0,duration:0}),b=(0,c.o)(),w=()=>{if(e.headHeight!==v)return{height:`${e.headHeight}px`}},k=()=>"loading"!==h.status&&"success"!==h.status&&!e.disabled,x=t=>{const n=+(e.pullDistance||e.headHeight);return t>n&&(t=t<2*n?n+(t-n)/2:1.5*n+(t-2*n)/4),Math.round(t)},y=(n,a)=>{const i=+(e.pullDistance||e.headHeight);h.distance=n,h.status=a?"loading":0===n?"normal":n<i?"pulling":"loosing",t("change",{status:h.status,distance:n})},W=()=>{const{status:t}=h;return"normal"===t?"":e[`${t}Text`]||p(t)},S=()=>{const{status:e,distance:t}=h;if(n[e])return n[e]({distance:t});const a=[];return m.includes(e)&&a.push((0,i.Wm)("div",{class:g("text")},[W()])),"loading"===e&&a.push((0,i.Wm)(d.gb,{class:g("loading")},{default:W})),a},T=()=>{h.status="success",setTimeout((()=>{y(0)}),+e.successDuration)},C=e=>{a=0===(0,s.cx)(f.value),a&&(h.duration=0,b.start(e))},_=e=>{k()&&C(e)},H=e=>{if(k()){a||C(e);const{deltaY:t}=b;b.move(e),a&&t.value>=0&&b.isVertical()&&((0,s.PF)(e),y(x(t.value)))}},$=()=>{a&&b.deltaY.value&&k()&&(h.duration=+e.animationDuration,"loosing"===h.status?(y(+e.headHeight,!0),t("update:modelValue",!0),(0,i.Y3)((()=>t("refresh")))):y(0))};return(0,i.YP)((()=>e.modelValue),(t=>{h.duration=+e.animationDuration,t?y(+e.headHeight,!0):n.success||e.successText?T():y(0,!1)})),(0,u.OR)("touchmove",H,{target:r}),()=>{var e;const t={transitionDuration:`${h.duration}ms`,transform:h.distance?`translate3d(0,${h.distance}px, 0)`:""};return(0,i.Wm)("div",{ref:o,class:g()},[(0,i.Wm)("div",{ref:r,class:g("track"),style:t,onTouchstartPassive:_,onTouchend:$,onTouchcancel:$},[(0,i.Wm)("div",{class:g("head"),style:w()},[S()]),null==(e=n.default)?void 0:e.call(n)])])}}});const w=(0,a.n)(b);n(1958),n(2939);var k=n(3444);const x=Symbol(),y=()=>(0,i.f3)(x,null),[W,S,T]=(0,o["do"])("list"),C={error:Boolean,offset:(0,r.SI)(300),loading:Boolean,disabled:Boolean,finished:Boolean,errorText:String,direction:(0,r.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:r.J5};var _=(0,i.aZ)({name:W,props:C,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:n}){const a=(0,l.iH)(e.loading),o=(0,l.iH)(),r=(0,l.iH)(),c=y(),f=(0,u.eo)(o),g=()=>{(0,i.Y3)((()=>{if(a.value||e.finished||e.disabled||e.error||!1===(null==c?void 0:c.value))return;const{direction:n}=e,i=+e.offset,l=(0,u.EL)(f);if(!l.height||(0,s.xj)(o))return;let d=!1;const g=(0,u.EL)(r);d="up"===n?l.top-g.top<=i:g.bottom-l.bottom<=i,d&&(a.value=!0,t("update:loading",!0),t("load"))}))},p=()=>{if(e.finished){const t=n.finished?n.finished():e.finishedText;if(t)return(0,i.Wm)("div",{class:S("finished-text")},[t])}},v=()=>{t("update:error",!1),g()},m=()=>{if(e.error){const t=n.error?n.error():e.errorText;if(t)return(0,i.Wm)("div",{role:"button",class:S("error-text"),tabindex:0,onClick:v},[t])}},h=()=>{if(a.value&&!e.finished&&!e.disabled)return(0,i.Wm)("div",{class:S("loading")},[n.loading?n.loading():(0,i.Wm)(d.gb,{class:S("loading-icon")},{default:()=>[e.loadingText||T("loading")]})])};return(0,i.YP)((()=>[e.loading,e.finished,e.error]),g),c&&(0,i.YP)(c,(e=>{e&&g()})),(0,i.ic)((()=>{a.value=e.loading})),(0,i.bv)((()=>{e.immediateCheck&&g()})),(0,k.F)({check:g}),(0,u.OR)("scroll",g,{target:f,passive:!0}),()=>{var t;const l=null==(t=n.default)?void 0:t.call(n),s=(0,i.Wm)("div",{ref:r,class:S("placeholder")},null);return(0,i.Wm)("div",{ref:o,role:"feed",class:S(),"aria-busy":a.value},["down"===e.direction?l:s,h(),p(),m(),"up"===e.direction?l:s])}}});const H=(0,a.n)(_);var $=n(4250),D=(n(7461),n(440)),q=(n(7357),n(7139)),O=n(2483),B=n(921),z=n(809),L=n(545),P=n(9936);const U={style:{height:"100vh",position:"relative"}},V={class:"item-block"},Y={key:0,class:"datetime"},j={key:1},I=["innerHTML"],Z={name:"ProcessList"};var A=Object.assign(Z,{setup(e){const t=(0,O.yj)(),n=(0,l.iH)(1),a=(0,l.iH)([]),o=(0,l.qj)({page:1,pageSize:10,pages:1}),r=(0,l.iH)(!1),s=(0,l.iH)(!1),u=(0,l.iH)(!1);function c(e){n.value=e,a.value=[],o.page=1,s.value=!1,setTimeout((()=>{s.value||d()}),500)}function d(){switch(u.value&&(a.value=[],u.value=!1),n.value){case"0":g();break;case"1":p();break;case"2":v();break}}function f(){s.value=!1,o.page=1,r.value=!0,d()}(0,i.bv)((()=>{n.value=t.params.activeIndex,d()}));const g=async()=>{const e=await(0,B.oZ)(o);m(e)},p=async()=>{const e=await(0,B.Rk)(o);m(e)},v=async()=>{const e=await(0,B.jb)(o);m(e)};function m(e){if(!e)return r.value=!1,(0,P.CF)("没有数据");for(let t=0;t<e.records.length;t++){let n=e.records[t];n.formValues=JSON.parse(n.formValues),a.value.push(n)}o.pages=e.pages,r.value=!1,o.page>=o.pages&&(s.value=!0),o.page=o.page+1}function h(e,t){L["default"].push({path:"/show/"+e+"/"+t+"/"+n.value})}return(e,t)=>{const o=D.l2,g=(0,i.up)("n-tab"),p=(0,i.up)("n-tabs"),v=(0,i.up)("n-layout-header"),m=(0,i.up)("n-timeline-item"),b=(0,i.up)("n-timeline"),k=(0,i.up)("n-thing"),x=$.bL,y=H,W=w,S=(0,i.up)("n-layout");return(0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(S,{position:"absolute"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(o,{title:"审批列表",border:!1}),(0,i.Wm)(p,{"default-value":"1",value:n.value,"justify-content":"space-evenly",type:"line","onUpdate:value":c},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{name:"0"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 待处理 ")])),_:1}),(0,i.Wm)(g,{name:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 已处理 ")])),_:1}),(0,i.Wm)(g,{name:"2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 已发起 ")])),_:1})])),_:1},8,["value"])])),_:1}),(0,i.Wm)(S,{position:"absolute",style:{top:"88px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{class:"list-wrap"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),onRefresh:f},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{loading:r.value,"onUpdate:loading":t[0]||(t[0]=e=>r.value=e),finished:s.value,"finished-text":"没有更多了",onLoad:d,"immediate-check":!1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.value,(e=>((0,i.wg)(),(0,i.j4)(x,{onClick:t=>h(e.id,e?.taskId),key:e.id},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{class:"item"},{header:(0,i.w5)((()=>[(0,i.Uk)((0,q.zw)(e.title),1)])),"header-extra":(0,i.w5)((()=>[(0,i.Uk)((0,q.zw)(e.createTime),1)])),footer:(0,i.w5)((()=>[(0,i._)("span",{class:(0,q.C_)(1===e.status?"审批中":2===e.status?"pass":"refused")},(0,q.zw)(1===e.status?"审批中":2===e.status?"审批通过":"审批拒绝"),3)])),default:(0,i.w5)((()=>[(0,i._)("div",V,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.formValues.formShowData,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,l.SU)(z.kJ)(e)&&(0,l.SU)(z.v9)(e[0])?((0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("span",null,(0,q.zw)(t)+":",1),(0,i.Wm)(b,{class:"timeline"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{type:"success",content:e[0]},null,8,["content"]),(0,i.Wm)(m,{type:"error",content:e[1]},null,8,["content"])])),_:2},1024)])):((0,i.wg)(),(0,i.iD)("div",j,[(0,i.Uk)((0,q.zw)(t)+": ",1),(0,i._)("span",{innerHTML:e},null,8,I)]))])))),128))])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])}}}),J=n(89);const F=(0,J.Z)(A,[["__scopeId","data-v-7a16935a"]]);var R=F},9048:function(e,t,n){n.d(t,{ZP:function(){return p},x_:function(){return f}});var a=n(3396),i=n(610),l=n(5323),o=n(2220),r=n(6491),s=n(6014),u=n(316);const[c,d]=(0,i["do"])("cell"),f={tag:(0,l.SQ)("div"),icon:String,size:String,title:l.Or,value:l.Or,label:l.Or,center:Boolean,isLink:Boolean,border:l.J5,required:Boolean,iconPrefix:String,valueClass:l.Vg,labelClass:l.Vg,titleClass:l.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},g=(0,o.l7)({},f,s.g2);var p=(0,a.aZ)({name:c,props:g,setup(e,{slots:t}){const n=(0,s.yj)(),i=()=>{const n=t.label||(0,r.Xq)(e.label);if(n)return(0,a.Wm)("div",{class:[d("label"),e.labelClass]},[t.label?t.label():e.label])},l=()=>{var n;if(t.title||(0,r.Xq)(e.title)){const l=null==(n=t.title)?void 0:n.call(t);if(Array.isArray(l)&&0===l.length)return;return(0,a.Wm)("div",{class:[d("title"),e.titleClass],style:e.titleStyle},[l||(0,a.Wm)("span",null,[e.title]),i()])}},o=()=>{const n=t.value||t.default,i=n||(0,r.Xq)(e.value);if(i)return(0,a.Wm)("div",{class:[d("value"),e.valueClass]},[n?n():(0,a.Wm)("span",null,[e.value])])},c=()=>t.icon?t.icon():e.icon?(0,a.Wm)(u.JO,{name:e.icon,class:d("left-icon"),classPrefix:e.iconPrefix},null):void 0,f=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,a.Wm)(u.JO,{name:t,class:d("right-icon")},null)}};return()=>{var i;const{tag:r,size:s,center:u,border:g,isLink:p,required:v}=e,m=null!=(i=e.clickable)?i:p,h={center:u,required:v,clickable:m,borderless:!g};return s&&(h[s]=!!s),(0,a.Wm)(r,{class:d(h),role:m?"button":void 0,tabindex:m?0:void 0,onClick:n},{default:()=>{var e;return[c(),l(),o(),f(),null==(e=t.extra)?void 0:e.call(t)]}})}}})},4250:function(e,t,n){n.d(t,{bL:function(){return l}});var a=n(1404),i=n(9048);const l=(0,a.n)(i.ZP)},7461:function(e,t,n){n(1958),n(368),n(6742),n(3094)},6014:function(e,t,n){n.d(t,{g2:function(){return i},yj:function(){return o}});var a=n(3396);const i={to:[String,Object],url:String,replace:Boolean};function l({to:e,url:t,replace:n,$router:a}){e&&a?a[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function o(){const e=(0,a.FN)().proxy;return()=>l(e)}},440:function(e,t,n){n.d(t,{l2:function(){return k}});var a=n(1404),i=n(3396),l=n(4870),o=n(610),r=n(5323),s=n(6048),u=n(5322),c=n(253),d=n(7936),f=n(648);const g=(e,t)=>{const n=(0,l.iH)(),a=()=>{n.value=(0,c.EL)(e).height};return(0,i.bv)((()=>{if((0,i.Y3)(a),t)for(let e=1;e<=3;e++)setTimeout(a,100*e)})),(0,f.h)((()=>(0,i.Y3)(a))),(0,i.YP)([d.bn,d.uK],a),n};function p(e,t){const n=g(e,!0);return e=>(0,i.Wm)("div",{class:t("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[e()])}var v=n(316);const[m,h]=(0,o["do"])("nav-bar"),b={title:String,fixed:Boolean,zIndex:r.Or,border:r.J5,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:r.J5};var w=(0,i.aZ)({name:m,props:b,emits:["clickLeft","clickRight"],setup(e,{emit:t,slots:n}){const a=(0,l.iH)(),o=p(a,h),r=e=>t("clickLeft",e),c=e=>t("clickRight",e),d=()=>n.left?n.left():[e.leftArrow&&(0,i.Wm)(v.JO,{class:h("arrow"),name:"arrow-left"},null),e.leftText&&(0,i.Wm)("span",{class:h("text")},[e.leftText])],f=()=>n.right?n.right():(0,i.Wm)("span",{class:h("text")},[e.rightText]),g=()=>{const{title:t,fixed:l,border:o,zIndex:g}=e,p=(0,s.As)(g),v=e.leftArrow||e.leftText||n.left,m=e.rightText||n.right;return(0,i.Wm)("div",{ref:a,style:p,class:[h({fixed:l}),{[u.xe]:o,"van-safe-area-top":e.safeAreaInsetTop}]},[(0,i.Wm)("div",{class:h("content")},[v&&(0,i.Wm)("div",{class:[h("left"),e.clickable?u.e9:""],onClick:r},[d()]),(0,i.Wm)("div",{class:[h("title"),"van-ellipsis"]},[n.title?n.title():t]),m&&(0,i.Wm)("div",{class:[h("right"),e.clickable?u.e9:""],onClick:c},[f()])])])};return()=>e.fixed&&e.placeholder?o(g):g()}});const k=(0,a.n)(w)},7357:function(e,t,n){n(1958),n(368),n(6742)},9936:function(e,t,n){n.d(t,{CF:function(){return k}});n(7658);var a=n(3396),i=n(4870),l=n(2220),o=n(6491),r=n(9242),s=n(3444);function u(){const e=(0,i.qj)({show:!1}),t=t=>{e.show=t},n=n=>{(0,l.l7)(e,n,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return(0,s.F)({open:n,close:a,toggle:t}),{open:n,close:a,state:e,toggle:t}}function c(e){const t=(0,r.ri)(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}var d=n(2727);const f={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let g=[],p=!1,v=(0,l.l7)({},f);const m=new Map;function h(e){return(0,o.Kn)(e)?e:{message:e}}function b(){const{instance:e,unmount:t}=c({setup(){const n=(0,i.iH)(""),{open:l,state:o,close:r,toggle:s}=u(),c=()=>{p&&(g=g.filter((t=>t!==e)),t())},f=()=>{const e={onClosed:c,"onUpdate:show":s};return(0,a.Wm)(d.Z,(0,a.dG)(o,e),null)};return(0,a.YP)(n,(e=>{o.message=e})),(0,a.FN)().render=f,{open:l,close:r,message:n}}});return e}function w(){if(!g.length||p){const e=b();g.push(e)}return g[g.length-1]}function k(e={}){if(!l._f)return{};const t=w(),n=h(e);return t.open((0,l.l7)({},v,m.get(n.type||v.type),n)),t}const x=e=>t=>k((0,l.l7)({type:e},h(t)));x("loading"),x("success"),x("fail")}}]);
//# sourceMappingURL=934.c503eba0.js.map