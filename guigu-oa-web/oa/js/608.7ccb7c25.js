"use strict";(self["webpackChunkguigu_oa_web"]=self["webpackChunkguigu_oa_web"]||[]).push([[608],{921:function(e,t,r){r.d(t,{$k:function(){return i},Rk:function(){return s},U4:function(){return a},Xm:function(){return f},Yt:function(){return l},jb:function(){return c},k_:function(){return p},oZ:function(){return u}});var n=r(4170);const o="/web/process";function l(){return n.d.request({url:`${o}/list`,method:"get"})}function i(e){return n.d.request({url:`${o}/template/${e}`,method:"get"})}function a(e){return n.d.request({url:`${o}/startUp`,method:"post",data:e})}function u({page:e,pageSize:t}){return n.d.request({url:`${o}/pending/${e}/${t}`,method:"get"})}function s({page:e,pageSize:t}){return n.d.request({url:`${o}/processed/${e}/${t}`,method:"get"})}function c({page:e,pageSize:t}){return n.d.request({url:`${o}/started/${e}/${t}`,method:"get"})}function f(e){return n.d.request({url:`${o}/show/${e}`,method:"get"})}function p(e){return n.d.request({url:`${o}/approve`,method:"post",data:e})}},608:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=r(440),o=(r(7357),r(7658),r(3396)),l=r(4870),i=r(2483),a=r(2092),u=r(921);const s={class:"main"},c={name:"Apply"};var f=Object.assign(c,{setup(e){const t=a.Z.$form(),r=(0,i.tv)(),c=(0,i.yj)(),f=(0,l.iH)([]),p=(0,l.iH)({}),d=(0,l.iH)(null),m=async e=>{const t=await(0,u.$k)(e);d.value=t,f.value=JSON.parse(t.formProps),p.value=JSON.parse(t.formOptions)};function g(e){let t={};f.value.forEach((r=>{console.log(r);for(let n in e)n===r.field&&("datePicker"===r.type&&r?.props?.type.includes("range"),t[r.title]=e[n])}));let n={formData:e,formShowData:t},o={processTemplateId:d.value.id,processTypeId:d.value.processTypeId,formValues:JSON.stringify(n)};(0,u.U4)(o).then((()=>{r.push({path:"/"})}))}return(0,o.bv)((()=>{let e=c.params.processTemplateId;m(e)})),(e,i)=>{const a=n.l2;return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(a,{title:"发起审批","left-text":"返回","left-arrow":"",onClickLeft:i[0]||(i[0]=()=>(0,l.SU)(r).back())}),(0,o._)("div",s,[(0,o.Wm)((0,l.SU)(t),{rule:f.value,option:p.value,onSubmit:g},null,8,["rule","option"])])])}}});const p=f;var d=p},440:function(e,t,r){r.d(t,{l2:function(){return b}});var n=r(1404),o=r(3396),l=r(4870),i=r(610),a=r(5323),u=r(6048),s=r(5322),c=r(253),f=r(7936),p=r(648);const d=(e,t)=>{const r=(0,l.iH)(),n=()=>{r.value=(0,c.EL)(e).height};return(0,o.bv)((()=>{if((0,o.Y3)(n),t)for(let e=1;e<=3;e++)setTimeout(n,100*e)})),(0,p.h)((()=>(0,o.Y3)(n))),(0,o.YP)([f.bn,f.uK],n),r};function m(e,t){const r=d(e,!0);return e=>(0,o.Wm)("div",{class:t("placeholder"),style:{height:r.value?`${r.value}px`:void 0}},[e()])}var g=r(316);const[h,v]=(0,i["do"])("nav-bar"),k={title:String,fixed:Boolean,zIndex:a.Or,border:a.J5,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:a.J5};var $=(0,o.aZ)({name:h,props:k,emits:["clickLeft","clickRight"],setup(e,{emit:t,slots:r}){const n=(0,l.iH)(),i=m(n,v),a=e=>t("clickLeft",e),c=e=>t("clickRight",e),f=()=>r.left?r.left():[e.leftArrow&&(0,o.Wm)(g.JO,{class:v("arrow"),name:"arrow-left"},null),e.leftText&&(0,o.Wm)("span",{class:v("text")},[e.leftText])],p=()=>r.right?r.right():(0,o.Wm)("span",{class:v("text")},[e.rightText]),d=()=>{const{title:t,fixed:l,border:i,zIndex:d}=e,m=(0,u.As)(d),g=e.leftArrow||e.leftText||r.left,h=e.rightText||r.right;return(0,o.Wm)("div",{ref:n,style:m,class:[v({fixed:l}),{[s.xe]:i,"van-safe-area-top":e.safeAreaInsetTop}]},[(0,o.Wm)("div",{class:v("content")},[g&&(0,o.Wm)("div",{class:[v("left"),e.clickable?s.e9:""],onClick:a},[f()]),(0,o.Wm)("div",{class:[v("title"),"van-ellipsis"]},[r.title?r.title():t]),h&&(0,o.Wm)("div",{class:[v("right"),e.clickable?s.e9:""],onClick:c},[p()])])])};return()=>e.fixed&&e.placeholder?i(d):d()}});const b=(0,n.n)($)},7357:function(e,t,r){r(1958),r(368),r(6742)}}]);
//# sourceMappingURL=608.7ccb7c25.js.map