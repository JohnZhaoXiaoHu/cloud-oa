{"version":3,"file":"js/608.7ccb7c25.js","mappings":"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","sources":["webpack://guigu-oa-web/./src/api/process.js","webpack://guigu-oa-web/./src/views/apply/apply.vue","webpack://guigu-oa-web/./src/views/apply/apply.vue?91c9","webpack://guigu-oa-web/./node_modules/vant/es/composables/use-height.mjs","webpack://guigu-oa-web/./node_modules/vant/es/composables/use-placeholder.mjs","webpack://guigu-oa-web/./node_modules/vant/es/nav-bar/NavBar.mjs","webpack://guigu-oa-web/./node_modules/vant/es/nav-bar/index.mjs"],"sourcesContent":["import { http } from '@/utils/http/axios';\n\nconst prefix = '/web/process';\n\n/**\n * @description: 获取审批\n */\nexport function getProcess() {\n  return http.request({\n    url: `${prefix}/list`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 获取审批模版\n */\nexport function getProcessTemplate(id) {\n  return http.request({\n    url: `${prefix}/template/${id}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 启动流程实例\n */\nexport function startUp(data) {\n  return http.request({\n    url: `${prefix}/startUp`,\n    method: 'post',\n    data,\n  });\n}\n\n/**\n * @description: 查询待处理任务\n */\nexport function fetchPending({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/pending/${page}/${pageSize}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 查询已处理任务\n */\nexport function fetchProcessed({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/processed/${page}/${pageSize}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 查询已发起任务\n */\nexport function fetchStarted({ page, pageSize }) {\n  return http.request({\n    url: `${prefix}/started/${page}/${pageSize}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 查询审批详情\n */\nexport function showProcess(id) {\n  return http.request({\n    url: `${prefix}/show/${id}`,\n    method: 'get',\n  });\n}\n\n/**\n * @description: 审批\n */\nexport function approveProcess(data) {\n  return http.request({\n    url: `${prefix}/approve`,\n    method: 'post',\n    data,\n  });\n}\n","import \"core-js/modules/es.array.push.js\";\nimport { resolveComponent as _resolveComponent, unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main\"\n};\nimport { useRoute, useRouter } from 'vue-router';\nimport formCreate from '@form-create/naive-ui';\nimport { onMounted, ref } from 'vue';\nimport { getProcessTemplate, startUp } from '@/api/process';\nconst __default__ = {\n  name: 'Apply'\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props) {\n    const FormCreate = formCreate.$form();\n    const router = useRouter();\n    const route = useRoute();\n    const rule = ref([]);\n    const options = ref({});\n    const processTemplate = ref(null);\n    const loadData = async processTemplateId => {\n      const res = await getProcessTemplate(processTemplateId);\n      processTemplate.value = res;\n      rule.value = JSON.parse(res.formProps);\n      options.value = JSON.parse(res.formOptions);\n    };\n    function onSubmit(formData) {\n      let formShowData = {};\n      rule.value.forEach(item => {\n        console.log(item);\n        for (let key in formData) {\n          if (key === item.field) {\n            if (item.type === 'datePicker' && item?.props?.type.includes('range')) {\n              //\n            }\n            formShowData[item.title] = formData[key];\n          }\n        }\n      });\n      let DATA = {\n        formData: formData,\n        formShowData: formShowData\n      };\n      let processFormVo = {\n        processTemplateId: processTemplate.value.id,\n        processTypeId: processTemplate.value.processTypeId,\n        formValues: JSON.stringify(DATA)\n      };\n      startUp(processFormVo).then(() => {\n        router.push({\n          path: '/'\n        });\n      });\n    }\n    onMounted(() => {\n      let processTemplateId = route.params.processTemplateId;\n      loadData(processTemplateId);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n      return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_van_nav_bar, {\n        title: \"发起审批\",\n        \"left-text\": \"返回\",\n        \"left-arrow\": \"\",\n        onClickLeft: _cache[0] || (_cache[0] = () => _unref(router).back())\n      }), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_unref(FormCreate), {\n        rule: rule.value,\n        option: options.value,\n        onSubmit: onSubmit\n      }, null, 8, [\"rule\", \"option\"])])]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./apply.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./apply.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useRect } from \"@vant/use\";\nimport { ref, onMounted, nextTick, watch } from \"vue\";\nimport { windowHeight, windowWidth } from \"../utils/index.mjs\";\nimport { onPopupReopen } from \"./on-popup-reopen.mjs\";\nconst useHeight = (element, withSafeArea) => {\n  const height = ref();\n  const setHeight = () => {\n    height.value = useRect(element).height;\n  };\n  onMounted(() => {\n    nextTick(setHeight);\n    if (withSafeArea) {\n      for (let i = 1; i <= 3; i++) {\n        setTimeout(setHeight, 100 * i);\n      }\n    }\n  });\n  onPopupReopen(() => nextTick(setHeight));\n  watch([windowWidth, windowHeight], setHeight);\n  return height;\n};\nexport {\n  useHeight\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { useHeight } from \"./use-height.mjs\";\nfunction usePlaceholder(contentRef, bem) {\n  const height = useHeight(contentRef, true);\n  return (renderContent) => _createVNode(\"div\", {\n    \"class\": bem(\"placeholder\"),\n    \"style\": {\n      height: height.value ? `${height.value}px` : void 0\n    }\n  }, [renderContent()]);\n}\nexport {\n  usePlaceholder\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { ref, defineComponent } from \"vue\";\nimport { truthProp, numericProp, BORDER_BOTTOM, getZIndexStyle, createNamespace, HAPTICS_FEEDBACK } from \"../utils/index.mjs\";\nimport { usePlaceholder } from \"../composables/use-placeholder.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nconst [name, bem] = createNamespace(\"nav-bar\");\nconst navBarProps = {\n  title: String,\n  fixed: Boolean,\n  zIndex: numericProp,\n  border: truthProp,\n  leftText: String,\n  rightText: String,\n  leftArrow: Boolean,\n  placeholder: Boolean,\n  safeAreaInsetTop: Boolean,\n  clickable: truthProp\n};\nvar stdin_default = defineComponent({\n  name,\n  props: navBarProps,\n  emits: [\"clickLeft\", \"clickRight\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const navBarRef = ref();\n    const renderPlaceholder = usePlaceholder(navBarRef, bem);\n    const onClickLeft = (event) => emit(\"clickLeft\", event);\n    const onClickRight = (event) => emit(\"clickRight\", event);\n    const renderLeft = () => {\n      if (slots.left) {\n        return slots.left();\n      }\n      return [props.leftArrow && _createVNode(Icon, {\n        \"class\": bem(\"arrow\"),\n        \"name\": \"arrow-left\"\n      }, null), props.leftText && _createVNode(\"span\", {\n        \"class\": bem(\"text\")\n      }, [props.leftText])];\n    };\n    const renderRight = () => {\n      if (slots.right) {\n        return slots.right();\n      }\n      return _createVNode(\"span\", {\n        \"class\": bem(\"text\")\n      }, [props.rightText]);\n    };\n    const renderNavBar = () => {\n      const {\n        title,\n        fixed,\n        border,\n        zIndex\n      } = props;\n      const style = getZIndexStyle(zIndex);\n      const hasLeft = props.leftArrow || props.leftText || slots.left;\n      const hasRight = props.rightText || slots.right;\n      return _createVNode(\"div\", {\n        \"ref\": navBarRef,\n        \"style\": style,\n        \"class\": [bem({\n          fixed\n        }), {\n          [BORDER_BOTTOM]: border,\n          \"van-safe-area-top\": props.safeAreaInsetTop\n        }]\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"content\")\n      }, [hasLeft && _createVNode(\"div\", {\n        \"class\": [bem(\"left\"), props.clickable ? HAPTICS_FEEDBACK : \"\"],\n        \"onClick\": onClickLeft\n      }, [renderLeft()]), _createVNode(\"div\", {\n        \"class\": [bem(\"title\"), \"van-ellipsis\"]\n      }, [slots.title ? slots.title() : title]), hasRight && _createVNode(\"div\", {\n        \"class\": [bem(\"right\"), props.clickable ? HAPTICS_FEEDBACK : \"\"],\n        \"onClick\": onClickRight\n      }, [renderRight()])])]);\n    };\n    return () => {\n      if (props.fixed && props.placeholder) {\n        return renderPlaceholder(renderNavBar);\n      }\n      return renderNavBar();\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  navBarProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _NavBar from \"./NavBar.mjs\";\nconst NavBar = withInstall(_NavBar);\nvar stdin_default = NavBar;\nimport { navBarProps } from \"./NavBar.mjs\";\nexport {\n  NavBar,\n  stdin_default as default,\n  navBarProps\n};\n"],"names":["prefix","getProcess","http","url","method","getProcessTemplate","id","startUp","data","fetchPending","page","pageSize","fetchProcessed","fetchStarted","showProcess","approveProcess","_hoisted_1","class","__default__","name","Object","assign","setup","__props","FormCreate","router","route","rule","options","processTemplate","loadData","async","res","processTemplateId","value","JSON","parse","formProps","formOptions","onSubmit","formData","formShowData","forEach","item","console","log","key","field","type","props","includes","title","DATA","processFormVo","processTypeId","formValues","stringify","then","push","path","params","_ctx","_cache","_component_van_nav_bar","onClickLeft","back","_","option","__exports__","useHeight","element","withSafeArea","height","ref","setHeight","useRect","onMounted","nextTick","i","setTimeout","onPopupReopen","watch","windowWidth","windowHeight","usePlaceholder","contentRef","bem","renderContent","_createVNode","createNamespace","navBarProps","String","fixed","Boolean","zIndex","numericProp","border","truthProp","leftText","rightText","leftArrow","placeholder","safeAreaInsetTop","clickable","stdin_default","defineComponent","emits","emit","slots","navBarRef","renderPlaceholder","event","onClickRight","renderLeft","left","Icon","renderRight","right","renderNavBar","style","getZIndexStyle","hasLeft","hasRight","BORDER_BOTTOM","HAPTICS_FEEDBACK","NavBar","withInstall","_NavBar"],"sourceRoot":""}