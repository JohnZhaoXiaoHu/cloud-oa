"use strict";(self["webpackChunkguigu_oa_web"]=self["webpackChunkguigu_oa_web"]||[]).push([[948],{3094:function(){},921:function(e,t,n){n.d(t,{$k:function(){return r},Rk:function(){return c},U4:function(){return a},Xm:function(){return d},Yt:function(){return o},jb:function(){return u},k_:function(){return v},oZ:function(){return s}});var i=n(4170);const l="/web/process";function o(){return i.d.request({url:`${l}/list`,method:"get"})}function r(e){return i.d.request({url:`${l}/template/${e}`,method:"get"})}function a(e){return i.d.request({url:`${l}/startUp`,method:"post",data:e})}function s({page:e,pageSize:t}){return i.d.request({url:`${l}/pending/${e}/${t}`,method:"get"})}function c({page:e,pageSize:t}){return i.d.request({url:`${l}/processed/${e}/${t}`,method:"get"})}function u({page:e,pageSize:t}){return i.d.request({url:`${l}/started/${e}/${t}`,method:"get"})}function d(e){return i.d.request({url:`${l}/show/${e}`,method:"get"})}function v(e){return i.d.request({url:`${l}/approve`,method:"post",data:e})}},1948:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n(9545),l=(n(2332),n(316)),o=(n(1958),n(368),n(6742),n(1404)),r=n(3396),a=n(610),s=n(5323),c=n(253);const[u,d]=(0,a["do"])("steps"),v={active:(0,s.SI)(0),direction:(0,s.SQ)("horizontal"),activeIcon:(0,s.SQ)("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},f=Symbol(u);var p=(0,r.aZ)({name:u,props:v,emits:["clickStep"],setup(e,{emit:t,slots:n}){const{linkChildren:i}=(0,c.$E)(f),l=e=>t("clickStep",e);return i({props:e,onClickStep:l}),()=>{var t;return(0,r.Wm)("div",{class:d([e.direction])},[(0,r.Wm)("div",{class:d("items")},[null==(t=n.default)?void 0:t.call(n)])])}}});const m=(0,o.n)(p);var g=n(5322);const[h,b]=(0,a["do"])("step");var k=(0,r.aZ)({name:h,setup(e,{slots:t}){const{parent:n,index:i}=(0,c.NB)(f);if(!n)return void 0;const o=n.props,a=()=>{const e=+o.active;return i.value<e?"finish":i.value===e?"process":"waiting"},s=()=>"process"===a(),u=(0,r.Fl)((()=>({background:"finish"===a()?o.activeColor:o.inactiveColor}))),d=(0,r.Fl)((()=>s()?{color:o.activeColor}:"waiting"===a()?{color:o.inactiveColor}:void 0)),v=()=>n.onClickStep(i.value),p=()=>{const{iconPrefix:e,finishIcon:n,activeIcon:i,activeColor:c,inactiveIcon:d}=o;return s()?t["active-icon"]?t["active-icon"]():(0,r.Wm)(l.JO,{class:b("icon","active"),name:i,color:c,classPrefix:e},null):"finish"===a()&&(n||t["finish-icon"])?t["finish-icon"]?t["finish-icon"]():(0,r.Wm)(l.JO,{class:b("icon","finish"),name:n,color:c,classPrefix:e},null):t["inactive-icon"]?t["inactive-icon"]():d?(0,r.Wm)(l.JO,{class:b("icon"),name:d,classPrefix:e},null):(0,r.Wm)("i",{class:b("circle"),style:u.value},null)};return()=>{var e;const n=a();return(0,r.Wm)("div",{class:[g.T5,b([o.direction,{[n]:n}])]},[(0,r.Wm)("div",{class:b("title",{active:s()}),style:d.value,onClick:v},[null==(e=t.default)?void 0:e.call(t)]),(0,r.Wm)("div",{class:b("circle-container"),onClick:v},[p()]),(0,r.Wm)("div",{class:b("line"),style:u.value},null)])}}});const y=(0,o.n)(k);var S=n(4250),x=(n(7461),n(440)),w=(n(7357),n(7658),n(7139)),W=n(4870),C=n(921),_=n(2483),z=n(9936),O=n(2092);const $={class:"container"},P={class:"custom-text"},T={class:"main"},q={class:"result"},B=(0,r._)("h3",null,"流程",-1),I={key:0,class:"footer"},J={class:"left-action"},H=(0,r._)("span",null,"返回",-1),A={class:"right-button"},F=(0,r._)("span",{style:{margin:"0 4px"}},null,-1),L={name:"ShowDetail"};var Z=Object.assign(L,{setup(e){const t=O.Z.$form(),n=(0,_.tv)(),o=(0,_.yj)(),a=(0,W.iH)(null),s=(0,W.iH)(0),c=(0,W.iH)(null),u=(0,W.iH)(null),d=(0,W.iH)([]),v=(0,W.iH)(!1),f=(0,W.iH)([]),p=(0,W.iH)({}),g={1:["ing","审批中"],2:["pass","已通过"],3:["fail","已拒绝"]},h=(0,W.iH)(g[1]),b=async e=>{const t=await(0,C.Xm)(e);if(!t)return(0,z.CF)("获取失败");c.value=t.process,h.value=g[t.process.status],u.value=JSON.parse(t.process.formValues),d.value=t.processRecordList,v.value=t.isApprove,k(t.processTemplate)};function k(e){f.value=JSON.parse(e.formProps),p.value=JSON.parse(e.formOptions),p.value.form.labelPlacement="top",p.value.submitBtn.show=!1,f.value.map((e=>{e["props"]["disabled"]=!0,e["value"]=u.value.formData[e["field"]]}))}const L=async e=>{let t={processId:c.value.id,taskId:a.value,status:e};(0,C.k_)(t).then((()=>{(0,z.CF)("审批通过"),n.push({path:"/list/1"})})).catch((()=>{(0,z.CF)("审批失败")}))};function Z(){n.push({path:"/list/"+s.value})}return(0,r.bv)((()=>{a.value=o.params.taskId,s.value=o.params.activeIndex;let e=o.params.id;b(e)})),(e,n)=>{const o=x.l2,a=S.bL,s=y,u=m,g=l.JO,b=i.zx;return(0,r.wg)(),(0,r.iD)("div",$,[(0,r.Wm)(o,{title:"审批详情","left-text":"返回","left-arrow":"",onClickLeft:Z}),(0,r.Wm)(a,null,{title:(0,r.w5)((()=>[(0,r._)("span",P,(0,w.zw)(c.value?.title),1)])),default:(0,r.w5)((()=>[(0,r._)("span",{class:(0,w.C_)(h.value[0])},(0,w.zw)(h.value[1]),3)])),_:1}),(0,r._)("div",T,[(0,r.Wm)((0,W.SU)(t),{rule:f.value,option:p.value},null,8,["rule","option"])]),(0,r.Wm)(a,{style:{"margin-top":"15px"}},{title:(0,r.w5)((()=>[(0,r._)("div",q,[B,(0,r.Wm)(u,{direction:"vertical",active:d.value.length},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.value,(e=>((0,r.wg)(),(0,r.j4)(s,{key:e.id},{default:(0,r.w5)((()=>[(0,r._)("h4",null,(0,w.zw)(e.operateUser)+" "+(0,w.zw)(e.description),1),(0,r._)("p",null,(0,w.zw)(e.createTime),1)])),_:2},1024)))),128)),(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r._)("h4",null,(0,w.zw)(c.value?.description),1)])),_:1})])),_:1},8,["active"])])])),_:1}),v.value?((0,r.wg)(),(0,r.iD)("div",I,[(0,r._)("div",J,[(0,r._)("div",{class:"action back",onClick:n[0]||(n[0]=()=>e.$router.back())},[(0,r.Wm)(g,{name:"revoke"}),H])]),(0,r._)("div",A,[(0,r.Wm)(b,{onClick:n[1]||(n[1]=e=>L(-1)),type:"default",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("审批拒绝")])),_:1}),F,(0,r.Wm)(b,{onClick:n[2]||(n[2]=e=>L(1)),type:"primary",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("审批通过")])),_:1})])])):(0,r.kq)("",!0)])}}});const j=Z;var D=j},9545:function(e,t,n){n.d(t,{zx:function(){return h}});var i=n(1404),l=n(3396),o=n(610),r=n(2220),a=n(5323),s=n(7936),c=n(5322),u=n(6014),d=n(316),v=n(2229);const[f,p]=(0,o["do"])("button"),m=(0,r.l7)({},u.g2,{tag:(0,a.SQ)("button"),text:String,icon:String,type:(0,a.SQ)("default"),size:(0,a.SQ)("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:(0,a.SQ)("button"),loadingSize:a.Or,loadingText:String,loadingType:String,iconPosition:(0,a.SQ)("left")});var g=(0,l.aZ)({name:f,props:m,emits:["click"],setup(e,{emit:t,slots:n}){const i=(0,u.yj)(),o=()=>n.loading?n.loading():(0,l.Wm)(v.gb,{size:e.loadingSize,type:e.loadingType,class:p("loading")},null),r=()=>e.loading?o():n.icon?(0,l.Wm)("div",{class:p("icon")},[n.icon()]):e.icon?(0,l.Wm)(d.JO,{name:e.icon,class:p("icon"),classPrefix:e.iconPrefix},null):void 0,a=()=>{let t;if(t=e.loading?e.loadingText:n.default?n.default():e.text,t)return(0,l.Wm)("span",{class:p("text")},[t])},f=()=>{const{color:t,plain:n}=e;if(t){const e={color:n?t:"white"};return n||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},m=n=>{e.loading?(0,s.PF)(n):e.disabled||(t("click",n),i())};return()=>{const{tag:t,type:n,size:i,block:o,round:s,plain:u,square:d,loading:v,disabled:g,hairline:h,nativeType:b,iconPosition:k}=e,y=[p([n,i,{plain:u,block:o,round:s,square:d,loading:v,disabled:g,hairline:h}]),{[c._K]:h}];return(0,l.Wm)(t,{type:b,class:y,style:f(),disabled:g,onClick:m},{default:()=>[(0,l.Wm)("div",{class:p("content")},["left"===k&&r(),a(),"right"===k&&r()])]})}}});const h=(0,i.n)(g)},2332:function(e,t,n){n(1958),n(368),n(6742),n(2939)},9048:function(e,t,n){n.d(t,{ZP:function(){return p},x_:function(){return v}});var i=n(3396),l=n(610),o=n(5323),r=n(2220),a=n(6491),s=n(6014),c=n(316);const[u,d]=(0,l["do"])("cell"),v={tag:(0,o.SQ)("div"),icon:String,size:String,title:o.Or,value:o.Or,label:o.Or,center:Boolean,isLink:Boolean,border:o.J5,required:Boolean,iconPrefix:String,valueClass:o.Vg,labelClass:o.Vg,titleClass:o.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},f=(0,r.l7)({},v,s.g2);var p=(0,i.aZ)({name:u,props:f,setup(e,{slots:t}){const n=(0,s.yj)(),l=()=>{const n=t.label||(0,a.Xq)(e.label);if(n)return(0,i.Wm)("div",{class:[d("label"),e.labelClass]},[t.label?t.label():e.label])},o=()=>{var n;if(t.title||(0,a.Xq)(e.title)){const o=null==(n=t.title)?void 0:n.call(t);if(Array.isArray(o)&&0===o.length)return;return(0,i.Wm)("div",{class:[d("title"),e.titleClass],style:e.titleStyle},[o||(0,i.Wm)("span",null,[e.title]),l()])}},r=()=>{const n=t.value||t.default,l=n||(0,a.Xq)(e.value);if(l)return(0,i.Wm)("div",{class:[d("value"),e.valueClass]},[n?n():(0,i.Wm)("span",null,[e.value])])},u=()=>t.icon?t.icon():e.icon?(0,i.Wm)(c.JO,{name:e.icon,class:d("left-icon"),classPrefix:e.iconPrefix},null):void 0,v=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,i.Wm)(c.JO,{name:t,class:d("right-icon")},null)}};return()=>{var l;const{tag:a,size:s,center:c,border:f,isLink:p,required:m}=e,g=null!=(l=e.clickable)?l:p,h={center:c,required:m,clickable:g,borderless:!f};return s&&(h[s]=!!s),(0,i.Wm)(a,{class:d(h),role:g?"button":void 0,tabindex:g?0:void 0,onClick:n},{default:()=>{var e;return[u(),o(),r(),v(),null==(e=t.extra)?void 0:e.call(t)]}})}}})},4250:function(e,t,n){n.d(t,{bL:function(){return o}});var i=n(1404),l=n(9048);const o=(0,i.n)(l.ZP)},7461:function(e,t,n){n(1958),n(368),n(6742),n(3094)},6014:function(e,t,n){n.d(t,{g2:function(){return l},yj:function(){return r}});var i=n(3396);const l={to:[String,Object],url:String,replace:Boolean};function o({to:e,url:t,replace:n,$router:i}){e&&i?i[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function r(){const e=(0,i.FN)().proxy;return()=>o(e)}},440:function(e,t,n){n.d(t,{l2:function(){return y}});var i=n(1404),l=n(3396),o=n(4870),r=n(610),a=n(5323),s=n(6048),c=n(5322),u=n(253),d=n(7936),v=n(648);const f=(e,t)=>{const n=(0,o.iH)(),i=()=>{n.value=(0,u.EL)(e).height};return(0,l.bv)((()=>{if((0,l.Y3)(i),t)for(let e=1;e<=3;e++)setTimeout(i,100*e)})),(0,v.h)((()=>(0,l.Y3)(i))),(0,l.YP)([d.bn,d.uK],i),n};function p(e,t){const n=f(e,!0);return e=>(0,l.Wm)("div",{class:t("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[e()])}var m=n(316);const[g,h]=(0,r["do"])("nav-bar"),b={title:String,fixed:Boolean,zIndex:a.Or,border:a.J5,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:a.J5};var k=(0,l.aZ)({name:g,props:b,emits:["clickLeft","clickRight"],setup(e,{emit:t,slots:n}){const i=(0,o.iH)(),r=p(i,h),a=e=>t("clickLeft",e),u=e=>t("clickRight",e),d=()=>n.left?n.left():[e.leftArrow&&(0,l.Wm)(m.JO,{class:h("arrow"),name:"arrow-left"},null),e.leftText&&(0,l.Wm)("span",{class:h("text")},[e.leftText])],v=()=>n.right?n.right():(0,l.Wm)("span",{class:h("text")},[e.rightText]),f=()=>{const{title:t,fixed:o,border:r,zIndex:f}=e,p=(0,s.As)(f),m=e.leftArrow||e.leftText||n.left,g=e.rightText||n.right;return(0,l.Wm)("div",{ref:i,style:p,class:[h({fixed:o}),{[c.xe]:r,"van-safe-area-top":e.safeAreaInsetTop}]},[(0,l.Wm)("div",{class:h("content")},[m&&(0,l.Wm)("div",{class:[h("left"),e.clickable?c.e9:""],onClick:a},[d()]),(0,l.Wm)("div",{class:[h("title"),"van-ellipsis"]},[n.title?n.title():t]),g&&(0,l.Wm)("div",{class:[h("right"),e.clickable?c.e9:""],onClick:u},[v()])])])};return()=>e.fixed&&e.placeholder?r(f):f()}});const y=(0,i.n)(k)},7357:function(e,t,n){n(1958),n(368),n(6742)},9936:function(e,t,n){n.d(t,{CF:function(){return y}});n(7658);var i=n(3396),l=n(4870),o=n(2220),r=n(6491),a=n(9242),s=n(3444);function c(){const e=(0,l.qj)({show:!1}),t=t=>{e.show=t},n=n=>{(0,o.l7)(e,n,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return(0,s.F)({open:n,close:i,toggle:t}),{open:n,close:i,state:e,toggle:t}}function u(e){const t=(0,a.ri)(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}var d=n(2727);const v={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let f=[],p=!1,m=(0,o.l7)({},v);const g=new Map;function h(e){return(0,r.Kn)(e)?e:{message:e}}function b(){const{instance:e,unmount:t}=u({setup(){const n=(0,l.iH)(""),{open:o,state:r,close:a,toggle:s}=c(),u=()=>{p&&(f=f.filter((t=>t!==e)),t())},v=()=>{const e={onClosed:u,"onUpdate:show":s};return(0,i.Wm)(d.Z,(0,i.dG)(r,e),null)};return(0,i.YP)(n,(e=>{r.message=e})),(0,i.FN)().render=v,{open:o,close:a,message:n}}});return e}function k(){if(!f.length||p){const e=b();f.push(e)}return f[f.length-1]}function y(e={}){if(!o._f)return{};const t=k(),n=h(e);return t.open((0,o.l7)({},m,g.get(n.type||m.type),n)),t}const S=e=>t=>y((0,o.l7)({type:e},h(t)));S("loading"),S("success"),S("fail")}}]);
//# sourceMappingURL=948.07537774.js.map